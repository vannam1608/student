<div class="container mt-4">
  <div class="card shadow">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <h3 class="mb-0">üìö L·ªãch h·ªçc & ƒêi·ªÉm s·ªë</h3>
      <a class="btn btn-light btn-sm" [routerLink]="['/student']">‚¨ÖÔ∏è Quay l·∫°i</a>
    </div>

    <div class="card-body">
      <!-- Tabs -->
      <ul class="nav nav-tabs mb-3" role="tablist">
        <li class="nav-item">
          <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#schedule">üóìÔ∏è L·ªãch h·ªçc</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#scores">üìä B·∫£ng ƒëi·ªÉm</button>
        </li>
      </ul>

      <div class="tab-content">
        <!-- üìÖ L·ªãch h·ªçc -->
        <div class="tab-pane fade show active" id="schedule">
          <table class="table table-bordered table-hover mt-2">
            <thead class="table-success">
              <tr>
                <th>#</th>
                <th>M√¥n h·ªçc</th>
                <th>Ng√†y b·∫Øt ƒë·∫ßu</th>
                <th>Th·ªùi gian h·ªçc</th>
                <th>Ng√†y thi</th>
                <th>Th·ªùi gian thi</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let s of schedule; let i = index">
                <td>{{ i + 1 }}</td>
                <td><strong>{{ s.subjectName }}</strong></td>
                <td>{{ s.startDate | date: 'dd/MM/yyyy' }}</td>
                <td>{{ s.studyTime }}</td>
                <td>{{ s.examDate | date: 'dd/MM/yyyy' }}</td>
                <td>{{ s.examTime }}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- üìä B·∫£ng ƒëi·ªÉm -->
        <div class="tab-pane fade" id="scores">
          <!-- ‚úÖ Hi·ªÉn th·ªã GPA -->
          <div class="d-flex justify-content-end mb-2">
            <span class="text-muted"><strong>üéì GPA:</strong> {{ gpa ?? '-' }}/4.00</span>
          </div>

          <ng-container [ngSwitch]="filterMode">
            <!-- ‚úî Ch·ªâ hi·ªán m√¥n ƒë√£ ho√†n th√†nh -->
            <div *ngSwitchCase="'completed'">
              <h6 class="text-success mt-3">‚úî M√¥n ƒë√£ ho√†n th√†nh</h6>
              <table class="table table-bordered table-hover mt-2">
                <thead class="table-success">
                  <tr>
                    <th>#</th>
                    <th>M√¥n h·ªçc</th>
                    <th>ƒêi·ªÉm qu√° tr√¨nh</th>
                    <th>ƒêi·ªÉm th√†nh ph·∫ßn</th>
                    <th>ƒêi·ªÉm cu·ªëi k·ª≥</th>
                    <th>ƒê·∫°t</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let s of completedScores; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td><strong>{{ s.subjectName }}</strong></td>
                    <td>{{ s.processPoint ?? '-' }}</td>
                    <td>{{ s.componentPoint ?? '-' }}</td>
                    <td>{{ s.finalPoint ?? '-' }}</td>
                    <td>
                      <span [ngClass]="{
                        'badge bg-success': s.isPassed,
                        'badge bg-danger': s.isPassed === false
                      }">
                        {{ s.isPassed ? '‚úî ƒê·∫°t' : '‚úò R·ªõt' }}
                      </span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- ‚è≥ Ch·ªâ hi·ªán m√¥n ch∆∞a ho√†n th√†nh -->
            <div *ngSwitchCase="'incompleted'">
              <h6 class="text-warning mt-3">‚è≥ M√¥n ch∆∞a ho√†n th√†nh</h6>
              <table class="table table-bordered table-hover mt-2">
                <thead class="table-warning">
                  <tr>
                    <th>#</th>
                    <th>M√¥n h·ªçc</th>
                    <th>ƒêi·ªÉm qu√° tr√¨nh</th>
                    <th>ƒêi·ªÉm th√†nh ph·∫ßn</th>
                    <th>ƒêi·ªÉm cu·ªëi k·ª≥</th>
                    <th>ƒê·∫°t</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let s of incompletedScores; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td><strong>{{ s.subjectName }}</strong></td>
                    <td>{{ s.processPoint ?? '-' }}</td>
                    <td>{{ s.componentPoint ?? '-' }}</td>
                    <td>{{ s.finalPoint ?? '-' }}</td>
                    <td><span class="text-muted">-</span></td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- üîÅ Hi·ªÉn th·ªã c·∫£ ho√†n th√†nh v√† ch∆∞a ho√†n th√†nh -->
            <div *ngSwitchDefault>
              <h6 class="text-success mt-3">‚úî M√¥n ƒë√£ ho√†n th√†nh</h6>
              <table class="table table-bordered table-hover mt-2">
                <thead class="table-success">
                  <tr>
                    <th>#</th>
                    <th>M√¥n h·ªçc</th>
                    <th>ƒêi·ªÉm qu√° tr√¨nh</th>
                    <th>ƒêi·ªÉm th√†nh ph·∫ßn</th>
                    <th>ƒêi·ªÉm cu·ªëi k·ª≥</th>
                    <th>ƒê·∫°t</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let s of completedScores; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td><strong>{{ s.subjectName }}</strong></td>
                    <td>{{ s.processPoint ?? '-' }}</td>
                    <td>{{ s.componentPoint ?? '-' }}</td>
                    <td>{{ s.finalPoint ?? '-' }}</td>
                    <td>
                      <span [ngClass]="{
                        'badge bg-success': s.isPassed,
                        'badge bg-danger': s.isPassed === false
                      }">
                        {{ s.isPassed ? '‚úî ƒê·∫°t' : '‚úò R·ªõt' }}
                      </span>
                    </td>
                  </tr>
                </tbody>
              </table>

              <h6 class="text-warning mt-5">‚è≥ M√¥n ch∆∞a ho√†n th√†nh</h6>
              <table class="table table-bordered table-hover mt-2">
                <thead class="table-warning">
                  <tr>
                    <th>#</th>
                    <th>M√¥n h·ªçc</th>
                    <th>ƒêi·ªÉm qu√° tr√¨nh</th>
                    <th>ƒêi·ªÉm th√†nh ph·∫ßn</th>
                    <th>ƒêi·ªÉm cu·ªëi k·ª≥</th>
                    <th>ƒê·∫°t</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let s of incompletedScores; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td><strong>{{ s.subjectName }}</strong></td>
                    <td>{{ s.processPoint ?? '-' }}</td>
                    <td>{{ s.componentPoint ?? '-' }}</td>
                    <td>{{ s.finalPoint ?? '-' }}</td>
                    <td><span class="text-muted">-</span></td>
                  </tr>
                </tbody>
              </table>
            </div>

          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
