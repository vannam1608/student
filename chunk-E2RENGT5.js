import{d as j,e as D,h as A}from"./chunk-DYK55EKY.js";import{Fb as k,Ha as P,Ja as l,Kb as C,La as n,Lb as F,Ma as r,Qb as w,Ra as E,Sa as f,Wa as i,Xa as h,Y as S,Ya as v,cb as y,db as u,hb as _,ib as I,ua as s,va as g}from"./chunk-6FGNK2YE.js";var b=()=>["/student/schedule-score"],L=()=>({tab:"schedule"}),q=()=>({tab:"completed"}),M=()=>({tab:"passed"});function N(a,B){if(a&1&&(n(0,"div",5),i(1),r()),a&2){let e=f();s(),v(" ",e.error," ")}}function R(a,B){if(a&1&&(n(0,"div",6)(1,"div",7)(2,"a",8)(3,"div",9)(4,"div",10)(5,"h6",11),i(6,"\u0110\xE3 \u0111\u0103ng k\xFD"),r(),n(7,"h2",12),i(8),r()()()()(),n(9,"div",7)(10,"a",8)(11,"div",13)(12,"div",10)(13,"h6",11),i(14,"Ho\xE0n th\xE0nh"),r(),n(15,"h2",14),i(16),r()()()()(),n(17,"div",7)(18,"a",8)(19,"div",15)(20,"div",10)(21,"h5",16),i(22,"Ch\u01B0a ho\xE0n th\xE0nh"),r(),n(23,"h2",17),i(24),r()()()()(),n(25,"div",7)(26,"div",18)(27,"div",10)(28,"h6",11),i(29,"GPA"),r(),n(30,"h2",19),i(31),_(32,"number"),r()()()()()),a&2){let e=f();s(2),l("routerLink",u(13,b))("queryParams",u(14,L)),s(6),h(e.progress.registeredSubjects),s(2),l("routerLink",u(15,b))("queryParams",u(16,q)),s(6),h(e.progress.completedSubjects),s(2),l("routerLink",u(17,b))("queryParams",u(18,M)),s(6),v(" ",(e.progress.registeredSubjects||0)-(e.progress.completedSubjects||0)," "),s(7),h(I(32,10,e.progress.gpa,"1.2-2"))}}var z=(()=>{class a{constructor(e,o){this.http=e,this.router=o,this.schedule=[],this.scores=[],this.progress=null,this.error=""}ngOnInit(){let e=localStorage.getItem("token");if(!e)return;let c=JSON.parse(atob(e.split(".")[1])).StudentId;this.http.get(`https://localhost:7082/api/Subject/schedule-and-score/${c}`).subscribe({next:p=>{let t=p.data;this.scores=t.map(d=>({subjectName:d.name,processPoint:d.processPoint,componentPoint:d.componentPoint,finalPoint:d.finalPoint,isPassed:d.isPassed}));let m=this.scores.length,x=this.scores.filter(d=>d.finalPoint!==null).length,T=m-x,G=this.calculateGPA(this.scores);this.progress={registeredSubjects:m,completedSubjects:x,incompletedSubjects:T,gpa:G}},error:()=>{this.error="\u274C Kh\xF4ng th\u1EC3 t\u1EA3i ti\u1EBFn \u0111\u1ED9 h\u1ECDc t\u1EADp."}})}calculateGPA(e){let o=e.filter(t=>t.finalPoint!==null);if(o.length===0)return 0;let c=t=>t>=8.5?4:t>=8?3.5:t>=7?3:t>=6.5?2.5:t>=5.5?2:t>=5?1.5:t>=4?1:0,p=o.reduce((t,m)=>t+c(m.finalPoint),0);return parseFloat((p/o.length).toFixed(2))}goBack(){this.router.navigate(["/student"])}static{this.\u0275fac=function(o){return new(o||a)(g(w),g(j))}}static{this.\u0275cmp=S({type:a,selectors:[["app-student-progress"]],standalone:!0,features:[y],decls:7,vars:2,consts:[[1,"container","mt-4"],[1,"text-primary","fw-bold","mb-4"],[1,"btn","btn-outline-secondary","btn-sm","mb-4",3,"click"],["class","alert alert-danger",4,"ngIf"],["class","row g-4",4,"ngIf"],[1,"alert","alert-danger"],[1,"row","g-4"],[1,"col-md-4"],[1,"text-decoration-none",3,"routerLink","queryParams"],[1,"card","border-success","border-2","shadow-sm","hover-shadow"],[1,"card-body","text-center"],[1,"text-muted","mb-1"],[1,"text-success"],[1,"card","border-warning","border-2","shadow-sm","hover-shadow"],[1,"text-warning"],[1,"card","shadow-sm","border-secondary","border-2","hoverable-card"],[1,"text-muted"],[1,"text-secondary"],[1,"card","border-dark","border-2","shadow-sm"],[1,"text-dark","fw-bold"]],template:function(o,c){o&1&&(n(0,"div",0)(1,"h2",1),i(2,"\u{1F4CA} Ti\u1EBFn \u0111\u1ED9 h\u1ECDc t\u1EADp"),r(),n(3,"a",2),E("click",function(){return c.goBack()}),i(4,"\u2B05\uFE0F Quay l\u1EA1i trang ch\xEDnh"),r(),P(5,N,2,1,"div",3)(6,R,33,19,"div",4),r()),o&2&&(s(5),l("ngIf",c.error),s(),l("ngIf",c.progress))},dependencies:[F,k,C,A,D],encapsulation:2})}}return a})();export{z as StudentProgressComponent};
