import './polyfills.server.mjs';
import{c as $e}from"./chunk-TRJUGB3P.mjs";import{a as J}from"./chunk-KGMEFVSM.mjs";import{a as O,b as S,c as R,d as z,e as ze,f as ce,g as Q,h as _e,i as ie,j as ne,k as pe,l as he,m as ge,n as Qe,o as Xe,p as X,q as re,r as $}from"./chunk-RPZVJSOK.mjs";import{a as Je}from"./chunk-3CJY23BS.mjs";import{e as Ke,f as L,g as me,i as P,j as I,k as De,l as Ue,m as D}from"./chunk-Z3XXXIBN.mjs";import{Cb as Le,Ja as v,K as te,La as d,Ma as F,Na as i,Nb as Ne,Oa as e,P as ae,Pa as h,Pb as de,Q as Ie,Qa as se,Qb as V,Ra as ue,Rb as k,Sa as B,Sb as Be,Ta as f,Tb as Ve,Ua as g,Ub as Oe,V as b,Vb as H,Xb as C,Ya as n,Z as Te,Za as u,_a as E,ab as G,bb as W,ca as M,cb as q,cc as K,da as T,dc as Re,eb as x,fb as y,fc as Ge,gb as U,gc as We,hb as le,hc as qe,ib as Pe,ic as He,jb as A,kb as w,m as ee,va as l,wa as p}from"./chunk-DRMBBSAZ.mjs";import{a as Me,h as Ce}from"./chunk-VVCT4QZE.mjs";var Ye=(()=>{class a{constructor(){this.title="Ql_Student"}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275cmp=b({type:a,selectors:[["app-root"]],standalone:!0,features:[x],decls:1,vars:0,template:function(r,o){r&1&&h(0,"router-outlet")},dependencies:[me]})}}return a})();var Ee=(()=>{class a{constructor(t,r){this.http=t,this.router=r,this.apiUrl="https://localhost:7082/api/auth/login"}isBrowser(){return typeof window<"u"&&typeof window.localStorage<"u"}login(t,r){return Ce(this,null,function*(){try{let o=yield this.http.post(this.apiUrl,{email:t,password:r}).toPromise();return console.log("Login Response:",o),o&&o.token&&this.isBrowser()?(localStorage.setItem("token",o.token),!0):!1}catch(o){return console.error("Login error:",o),!1}})}logout(){this.isBrowser()&&localStorage.removeItem("token"),this.router.navigate(["/login"])}isAuthenticated(){return this.isBrowser()&&!!localStorage.getItem("token")}getToken(){return this.isBrowser()?localStorage.getItem("token"):null}getRole(){let t=this.getToken();return t&&JSON.parse(atob(t.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]||""}getStudentId(){let t=this.getToken();if(!t)return null;let r=JSON.parse(atob(t.split(".")[1]));return r.StudentId?+r.StudentId:null}isRoot(){let t=this.getToken();return t?JSON.parse(atob(t.split(".")[1])).IsRoot==="true":!1}getEmail(){let t=this.getToken();return t&&JSON.parse(atob(t.split(".")[1]))["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]||""}getUserName(){let t=this.getToken();if(!t)return"Ng\u01B0\u1EDDi d\xF9ng";try{let r=JSON.parse(atob(t.split(".")[1]));return r.Name||r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]||"Ng\u01B0\u1EDDi d\xF9ng"}catch(r){return console.error("L\u1ED7i khi decode token:",r),"Ng\u01B0\u1EDDi d\xF9ng"}}static{this.\u0275fac=function(r){return new(r||a)(ae(K),ae(P))}}static{this.\u0275prov=te({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();function Ct(a,m){if(a&1&&(i(0,"div",15),n(1),e()),a&2){let t=g();l(),u(t.error)}}var et=(()=>{class a{constructor(t,r,o){this.fb=t,this.authService=r,this.router=o,this.loginForm=this.fb.group({email:["",[S.required,S.email]],password:["",S.required]}),this.error=""}login(){return Ce(this,null,function*(){if(this.loginForm.invalid)return;let{email:t,password:r}=this.loginForm.value;try{if(yield this.authService.login(t,r)){let s=this.authService.getRole();this.router.navigate([s==="Admin"?"/admin":"/student"])}else this.error="Sai t\xE0i kho\u1EA3n ho\u1EB7c m\u1EADt kh\u1EA9u."}catch{this.error="L\u1ED7i m\xE1y ch\u1EE7 ho\u1EB7c k\u1EBFt n\u1ED1i."}})}static{this.\u0275fac=function(r){return new(r||a)(p(X),p(Ee),p(P))}}static{this.\u0275cmp=b({type:a,selectors:[["app-login"]],standalone:!0,features:[x],decls:24,vars:7,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100","bg-light"],[1,"card","shadow","p-4",2,"width","100%","max-width","400px"],[1,"text-center","mb-4"],[1,"fw-bold","mb-0"],[1,"text-muted","mb-0"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],[1,"invalid-feedback"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["class","alert alert-danger py-2",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-primary","fw-bold",3,"disabled"],[1,"alert","alert-danger","py-2"]],template:function(r,o){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),n(4,"\u{1F393} Student Portal"),e(),i(5,"p",4),n(6,"\u0110\u0103ng nh\u1EADp h\u1EC7 th\u1ED1ng"),e()(),i(7,"form",5),f("ngSubmit",function(){return o.login()}),i(8,"div",6)(9,"label",7),n(10,"\u{1F4E7} Email"),e(),h(11,"input",8),i(12,"div",9),n(13,"Email kh\xF4ng h\u1EE3p l\u1EC7"),e()(),i(14,"div",6)(15,"label",10),n(16,"\u{1F510} M\u1EADt kh\u1EA9u"),e(),h(17,"input",11),i(18,"div",9),n(19,"Vui l\xF2ng nh\u1EADp m\u1EADt kh\u1EA9u"),e()(),v(20,Ct,2,1,"div",12),i(21,"div",13)(22,"button",14),n(23," \u0110\u0103ng nh\u1EADp "),e()()()()()),r&2){let s,c;l(7),d("formGroup",o.loginForm),l(4),F("is-invalid",((s=o.loginForm.get("email"))==null?null:s.invalid)&&((s=o.loginForm.get("email"))==null?null:s.touched)),l(6),F("is-invalid",((c=o.loginForm.get("password"))==null?null:c.invalid)&&((c=o.loginForm.get("password"))==null?null:c.touched)),l(3),d("ngIf",o.error),l(2),d("disabled",o.loginForm.invalid)}},dependencies:[C,k,$,Q,O,R,z,ie,ne],styles:[".card[_ngcontent-%COMP%]{border-radius:12px;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}"]})}}return a})();var je=(a,m)=>{let t=Ie(Ee),r=Ie(P);return t.isAuthenticated()||m.url==="/login"?!0:r.createUrlTree(["/login"])};var tt=(a,m)=>!0;var it=(a,m)=>!0;var Dt=()=>({exact:!0}),nt=(()=>{class a{constructor(t){this.authService=t,this.userName=""}ngOnInit(){this.userName=this.authService.getUserName()}logout(){this.authService.logout()}static{this.\u0275fac=function(r){return new(r||a)(p(Ee))}}static{this.\u0275cmp=b({type:a,selectors:[["app-admin-layout"]],standalone:!0,features:[x],decls:49,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","shadow-sm","px-4","py-2"],["routerLink","/admin",1,"navbar-brand","fw-bold"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/admin","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],[1,"nav-item","dropdown"],["href","#","id","studentsDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu"],["routerLink","/admin/students",1,"dropdown-item"],["routerLink","/admin/students/add",1,"dropdown-item"],["href","#","id","subjectsDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["routerLink","/admin/subjects",1,"dropdown-item"],["routerLink","/admin/subjects/add",1,"dropdown-item"],["href","#","id","scoresDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["routerLink","/admin/scores",1,"dropdown-item"],["routerLink","/admin/scores/input",1,"dropdown-item"],[1,"d-flex","align-items-center"],[1,"navbar-text","text-white","me-3"],[1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"container","mt-4"]],template:function(r,o){r&1&&(i(0,"nav",0)(1,"a",1),n(2,"\u{1F393} Student Admin"),e(),i(3,"button",2),h(4,"span",3),e(),i(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),n(9," \u{1F4CA} Dashboard "),e()(),i(10,"li",8)(11,"a",9),n(12," \u{1F468}\u200D\u{1F393} Students "),e(),i(13,"ul",10)(14,"li")(15,"a",11),n(16,"Danh s\xE1ch sinh vi\xEAn"),e()(),i(17,"li")(18,"a",12),n(19,"Th\xEAm sinh vi\xEAn"),e()()()(),i(20,"li",8)(21,"a",13),n(22," \u{1F4DA} Subjects "),e(),i(23,"ul",10)(24,"li")(25,"a",14),n(26,"Danh s\xE1ch m\xF4n h\u1ECDc"),e()(),i(27,"li")(28,"a",15),n(29,"Th\xEAm m\xF4n h\u1ECDc"),e()()()(),i(30,"li",8)(31,"a",16),n(32," \u{1F4DD} Scores "),e(),i(33,"ul",10)(34,"li")(35,"a",17),n(36,"Xem \u0111i\u1EC3m"),e()(),i(37,"li")(38,"a",18),n(39,"Nh\u1EADp \u0111i\u1EC3m"),e()()()()(),i(40,"div",19)(41,"span",20),n(42," \u{1F44B} Xin ch\xE0o, "),i(43,"strong"),n(44),e()(),i(45,"button",21),f("click",function(){return o.logout()}),n(46,"Logout"),e()()()(),i(47,"div",22),h(48,"router-outlet"),e()),r&2&&(l(8),d("routerLinkActiveOptions",y(2,Dt)),l(36),u(o.userName))},dependencies:[C,D,me,I,De],encapsulation:2})}}return a})();var rt=(()=>{class a{constructor(){this.userEmail="";let t=localStorage.getItem("token");if(t){let r=JSON.parse(atob(t.split(".")[1]));this.userEmail=r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]||""}}logout(){localStorage.removeItem("token"),location.href="/login"}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275cmp=b({type:a,selectors:[["app-student-layout"]],standalone:!0,features:[x],decls:28,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","px-4","shadow-sm"],["routerLink","/student",1,"navbar-brand","fw-bold"],["type","button","data-bs-toggle","collapse","data-bs-target","#studentNavbar","aria-controls","studentNavbar","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","studentNavbar",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/student","routerLinkActive","active",1,"nav-link"],["routerLink","/student/user-info","routerLinkActive","active",1,"nav-link"],["routerLink","/student/profile","routerLinkActive","active",1,"nav-link"],["routerLink","/student/register-subjects","routerLinkActive","active",1,"nav-link"],["routerLink","/student/schedule-score","routerLinkActive","active",1,"nav-link"],[1,"navbar-text","text-white","me-3","fw-medium"],[1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"container","py-4"]],template:function(r,o){r&1&&(i(0,"nav",0)(1,"a",1),n(2," \u{1F393} Student Portal "),e(),i(3,"button",2),h(4,"span",3),e(),i(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),n(9,"\u{1F3E0} Dashboard"),e()(),i(10,"li",6)(11,"a",8),n(12,"\u{1F464} Th\xF4ng tin"),e()(),i(13,"li",6)(14,"a",9),n(15,"\u270F\uFE0F C\u1EADp nh\u1EADt"),e()(),i(16,"li",6)(17,"a",10),n(18,"\u{1F4DD} \u0110\u0103ng k\xFD m\xF4n"),e()(),i(19,"li",6)(20,"a",11),n(21,"\u{1F4C5} L\u1ECBch & \u0111i\u1EC3m"),e()()(),i(22,"span",12),n(23),e(),i(24,"button",13),f("click",function(){return o.logout()}),n(25," \u{1F512} \u0110\u0103ng xu\u1EA5t "),e()()(),i(26,"div",14),h(27,"router-outlet"),e()),r&2&&(l(23),E(" \u{1F44B} ",o.userEmail," "))},dependencies:[C,D,me,I,De],encapsulation:2})}}return a})();var oe=(()=>{class a{constructor(t){this.http=t,this.baseUrl="https://localhost:7082/api/student"}getAll(){return this.http.get(this.baseUrl).pipe(ee(t=>t.data.map(r=>({id:r.id,studentCode:r.studentCode??r.code,name:r.name,gender:r.gender,birthDate:r.birthDate,class:r.class,course:r.course}))))}getById(t){return this.http.get(`${this.baseUrl}/${t}`).pipe(ee(r=>{let o=r.data;return{id:o.id,studentCode:o.studentCode??o.code,name:o.name,gender:o.gender,birthDate:o.birthDate,class:o.class,course:o.course}}))}create(t){return this.http.post(`${this.baseUrl}/add`,t).pipe(ee(r=>r.data))}update(t,r){return this.http.put(`${this.baseUrl}/update-profile/${t}`,r)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}static{this.\u0275fac=function(r){return new(r||a)(ae(K))}}static{this.\u0275prov=te({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var Se=(()=>{class a{constructor(t){this.http=t,this.apiUrl="https://localhost:7082/api/Score"}getAll(){return this.http.get(`${this.apiUrl}/all`).pipe(ee(t=>t.data.map(r=>({studentId:r.studentId,studentName:r.studentName,subjectId:r.subjectId,subjectName:r.subjectName,processPoint:r.processPoint??null,componentPoint:r.componentPoint??null,finalPoint:r.finalPoint??null,isPassed:r.isPassed??null}))))}getByStudent(t){return this.http.get(`${this.apiUrl}/student/${t}`).pipe(ee(r=>r.data.map(o=>({studentId:o.studentId,studentName:o.studentName,subjectId:o.subjectId,subjectName:o.subjectName,processPoint:o.processPoint??null,componentPoint:o.componentPoint??null,finalPoint:o.finalPoint??null,isPassed:o.isPassed??null}))))}inputScore(t){return this.http.post(`${this.apiUrl}/input`,t)}getScoreByStudentAndSubject(t,r){return this.getByStudent(t).pipe(ee(o=>o.find(s=>s.subjectId===r)))}delete(t,r){return this.http.delete(`${this.apiUrl}/delete/${t}/${r}`)}static{this.\u0275fac=function(r){return new(r||a)(ae(K))}}static{this.\u0275prov=te({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var ot=(()=>{class a{constructor(t,r,o){this.studentService=t,this.subjectService=r,this.scoreService=o,this.totalStudents=0,this.totalSubjects=0,this.totalScores=0,this.pendingScores=0}ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.studentService.getAll().subscribe({next:t=>this.totalStudents=t.length,error:()=>this.totalStudents=0}),this.subjectService.getAll().subscribe({next:t=>this.totalSubjects=t.length,error:()=>this.totalSubjects=0}),this.scoreService.getAll().subscribe({next:t=>{this.totalScores=t.filter(r=>r.finalPoint!==null).length,this.pendingScores=t.filter(r=>r.finalPoint===null).length},error:()=>{this.totalScores=0,this.pendingScores=0}})}static{this.\u0275fac=function(r){return new(r||a)(p(oe),p(J),p(Se))}}static{this.\u0275cmp=b({type:a,selectors:[["app-admin-dashboard"]],standalone:!0,features:[x],decls:76,vars:4,consts:[[1,"container","py-4"],[1,"mb-4","text-primary"],[1,"row","g-4"],[1,"col-md-3"],[1,"card","text-white","bg-primary","h-100","shadow-sm"],[1,"card-body","text-center"],[1,"card-title"],[1,"display-6","fw-bold"],[1,"card-footer","bg-transparent","border-top-0","text-center"],["routerLink","/admin/students",1,"text-white","text-decoration-underline"],[1,"card","text-white","bg-success","h-100","shadow-sm"],["routerLink","/admin/subjects",1,"text-white","text-decoration-underline"],[1,"card","text-white","bg-info","h-100","shadow-sm"],["routerLink","/admin/scores",1,"text-white","text-decoration-underline"],[1,"card","text-white","bg-warning","h-100","shadow-sm"],["routerLink","/admin/scores/input",1,"text-white","text-decoration-underline"],[1,"my-5"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"text-secondary"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"col-md-6","text-center"],["src","https://cdn-icons-png.flaticon.com/512/3039/3039389.png","alt","Admin illustration",1,"img-fluid",2,"max-height","240px"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"h2",1),n(2,"\u{1F393} Admin Dashboard"),e(),i(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),n(8,"T\u1ED5ng Sinh Vi\xEAn"),e(),i(9,"p",7),n(10),e()(),i(11,"div",8)(12,"a",9),n(13,"\u{1F468}\u200D\u{1F393} Qu\u1EA3n l\xFD sinh vi\xEAn"),e()()()(),i(14,"div",3)(15,"div",10)(16,"div",5)(17,"h5",6),n(18,"T\u1ED5ng M\xF4n H\u1ECDc"),e(),i(19,"p",7),n(20),e()(),i(21,"div",8)(22,"a",11),n(23,"\u{1F4DA} Qu\u1EA3n l\xFD m\xF4n h\u1ECDc"),e()()()(),i(24,"div",3)(25,"div",12)(26,"div",5)(27,"h5",6),n(28,"T\u1ED5ng \u0110i\u1EC3m \u0110\xE3 Nh\u1EADp"),e(),i(29,"p",7),n(30),e()(),i(31,"div",8)(32,"a",13),n(33,"\u{1F4CA} Xem \u0111i\u1EC3m"),e()()()(),i(34,"div",3)(35,"div",14)(36,"div",5)(37,"h5",6),n(38,"Ch\u01B0a Nh\u1EADp \u0110i\u1EC3m"),e(),i(39,"p",7),n(40),e()(),i(41,"div",8)(42,"a",15),n(43,"\u270D\uFE0F Nh\u1EADp \u0111i\u1EC3m"),e()()()()(),h(44,"hr",16),i(45,"div",17)(46,"div",18)(47,"h5",19),n(48,"\u{1F4CC} H\u01B0\u1EDBng d\u1EABn nhanh"),e(),i(49,"ul",20)(50,"li",21),n(51," \u2795 "),i(52,"strong"),n(53,"Th\xEAm sinh vi\xEAn:"),e(),n(54," V\xE0o "),i(55,"em"),n(56,"Sinh vi\xEAn > Th\xEAm"),e()(),i(57,"li",21),n(58," \u{1F9FE} "),i(59,"strong"),n(60,"Nh\u1EADp \u0111i\u1EC3m:"),e(),n(61," Ch\u1ECDn m\u1EE5c "),i(62,"em"),n(63,"\u0110i\u1EC3m > Nh\u1EADp \u0111i\u1EC3m"),e()(),i(64,"li",21),n(65," \u{1F4CA} "),i(66,"strong"),n(67,"Xem \u0111i\u1EC3m:"),e(),n(68," Xem danh s\xE1ch \u0111i\u1EC3m sinh vi\xEAn theo m\xF4n h\u1ECDc "),e(),i(69,"li",21),n(70," \u{1F46E}\u200D\u2642\uFE0F "),i(71,"strong"),n(72,"Ph\xE2n quy\u1EC1n:"),e(),n(73," \u0110\xE3 t\xEDch h\u1EE3p x\xE1c th\u1EF1c & ph\xE2n quy\u1EC1n "),e()()(),i(74,"div",22),h(75,"img",23),e()()()),r&2&&(l(10),u(o.totalStudents),l(10),u(o.totalSubjects),l(10),u(o.totalScores),l(10),u(o.pendingScores))},dependencies:[C,D,I],encapsulation:2})}}return a})();var _t=()=>["/admin/students/add"],yt=a=>["/admin/students/detail",a],Ft=a=>["/admin/students/edit",a],It=()=>[];function jt(a,m){if(a&1&&(i(0,"option"),n(1),e()),a&2){let t=m.$implicit;l(),u(t)}}function kt(a,m){if(a&1){let t=B();i(0,"tr")(1,"td",16),n(2),e(),i(3,"td"),n(4),e(),i(5,"td"),n(6),e(),i(7,"td"),n(8),e(),i(9,"td"),n(10),A(11,"date"),e(),i(12,"td"),n(13),e(),i(14,"td"),n(15),e(),i(16,"td",17)(17,"div",18)(18,"a",19),n(19,"\u{1F441}\uFE0F"),e(),i(20,"a",20),n(21,"\u270F\uFE0F"),e(),i(22,"button",21),f("click",function(){let o=M(t).$implicit,s=g();return T(s.delete(o.id))}),n(23,"\u{1F5D1}\uFE0F"),e()()()()}if(a&2){let t=m.$implicit,r=m.index,o=g();l(2),u(o.pageSize*(o.currentPage-1)+r+1),l(2),u(t.studentCode),l(2),u(t.name),l(2),u(t.gender),l(2),u(w(11,9,t.birthDate,"dd/MM/yyyy")),l(3),u(t.class),l(2),u(t.course),l(3),d("routerLink",U(12,yt,t.id)),l(2),d("routerLink",U(14,Ft,t.id))}}function At(a,m){a&1&&(i(0,"tr")(1,"td",22),n(2,"\u26A0\uFE0F Kh\xF4ng c\xF3 sinh vi\xEAn n\xE0o ph\xF9 h\u1EE3p."),e()())}function wt(a,m){if(a&1){let t=B();i(0,"li",25)(1,"a",26),f("click",function(){let o=M(t).index,s=g(2);return T(s.changePage(o+1))}),n(2),e()()}if(a&2){let t=m.index,r=g(2);F("active",r.currentPage===t+1),l(2),u(t+1)}}function Mt(a,m){if(a&1){let t=B();i(0,"nav",23)(1,"ul",24)(2,"li",25)(3,"a",26),f("click",function(){M(t);let o=g();return T(o.changePage(o.currentPage-1))}),n(4,"\xAB"),e()(),v(5,wt,3,3,"li",27),i(6,"li",25)(7,"a",26),f("click",function(){M(t);let o=g();return T(o.changePage(o.currentPage+1))}),n(8,"\xBB"),e()()()()}if(a&2){let t=g();l(2),F("disabled",t.currentPage===1),l(3),d("ngForOf",y(5,It).constructor(t.totalPages)),l(),F("disabled",t.currentPage===t.totalPages)}}var at=(()=>{class a{constructor(t,r){this.studentService=t,this.router=r,this.students=[],this.filteredStudents=[],this.pagedStudents=[],this.uniqueClasses=[],this.searchKeyword="",this.selectedClass="",this.currentPage=1,this.pageSize=5,this.totalPages=1}ngOnInit(){this.loadStudents()}loadStudents(){this.studentService.getAll().subscribe(t=>{this.students=t,this.uniqueClasses=[...new Set(t.map(r=>r.class))],this.filterStudents()})}filterStudents(){let t=this.students;if(this.searchKeyword){let r=this.searchKeyword.toLowerCase();t=t.filter(o=>o.name.toLowerCase().includes(r)||o.studentCode.toLowerCase().includes(r))}this.selectedClass&&(t=t.filter(r=>r.class===this.selectedClass)),this.filteredStudents=t,this.totalPages=Math.ceil(t.length/this.pageSize),this.currentPage=1,this.updatePagedStudents()}updatePagedStudents(){let t=(this.currentPage-1)*this.pageSize,r=t+this.pageSize;this.pagedStudents=this.filteredStudents.slice(t,r)}changePage(t){t<1||t>this.totalPages||(this.currentPage=t,this.updatePagedStudents())}edit(t){this.router.navigate(["/admin/students/edit",t])}delete(t){confirm("\u274C B\u1EA1n c\xF3 ch\u1EAFc mu\u1ED1n xo\xE1 sinh vi\xEAn n\xE0y?")&&this.studentService.delete(t).subscribe(()=>this.loadStudents())}static{this.\u0275fac=function(r){return new(r||a)(p(oe),p(P))}}static{this.\u0275cmp=b({type:a,selectors:[["app-student-list"]],standalone:!0,features:[x],decls:38,vars:8,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"btn","btn-primary",3,"routerLink"],[1,"row","mb-3"],[1,"col-md-6","mb-2"],["type","text","placeholder","\u{1F50D} T\xECm ki\u1EBFm theo t\xEAn ho\u1EB7c m\xE3 SV...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-md-4","mb-2"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[4,"ngFor","ngForOf"],[1,"table-responsive","shadow-sm"],[1,"table","table-bordered","table-hover","table-striped","align-middle"],[1,"table-dark","text-center"],[4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"text-center"],[1,"text-nowrap"],[1,"d-flex","gap-1"],[1,"btn","btn-sm","btn-info",3,"routerLink"],[1,"btn","btn-sm","btn-warning",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","8",1,"text-center","text-muted","py-3"],[1,"mt-3"],[1,"pagination","justify-content-center"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),n(3,"\u{1F4CB} Danh s\xE1ch sinh vi\xEAn"),e(),i(4,"a",3),n(5,"\u2795 Th\xEAm sinh vi\xEAn"),e()(),i(6,"div",4)(7,"div",5)(8,"input",6),q("ngModelChange",function(c){return W(o.searchKeyword,c)||(o.searchKeyword=c),c}),f("input",function(){return o.filterStudents()}),e()(),i(9,"div",7)(10,"select",8),q("ngModelChange",function(c){return W(o.selectedClass,c)||(o.selectedClass=c),c}),f("change",function(){return o.filterStudents()}),i(11,"option",9),n(12,"-- T\u1EA5t c\u1EA3 l\u1EDBp --"),e(),v(13,jt,2,1,"option",10),e()()(),i(14,"div",11)(15,"table",12)(16,"thead",13)(17,"tr")(18,"th"),n(19,"#"),e(),i(20,"th"),n(21,"M\xE3 SV"),e(),i(22,"th"),n(23,"H\u1ECD t\xEAn"),e(),i(24,"th"),n(25,"Gi\u1EDBi t\xEDnh"),e(),i(26,"th"),n(27,"Ng\xE0y sinh"),e(),i(28,"th"),n(29,"L\u1EDBp"),e(),i(30,"th"),n(31,"Kho\xE1 h\u1ECDc"),e(),i(32,"th"),n(33,"H\xE0nh \u0111\u1ED9ng"),e()()(),i(34,"tbody"),v(35,kt,24,16,"tr",10)(36,At,3,0,"tr",14),e()()(),v(37,Mt,9,6,"nav",15),e()),r&2&&(l(4),d("routerLink",y(7,_t)),l(4),G("ngModel",o.searchKeyword),l(2),G("ngModel",o.selectedClass),l(3),d("ngForOf",o.uniqueClasses),l(22),d("ngForOf",o.pagedStudents),l(),d("ngIf",o.pagedStudents.length===0),l(),d("ngIf",o.totalPages>1))},dependencies:[C,V,k,H,D,I,re,he,ge,O,pe,R,ce],encapsulation:2})}}return a})();var Ae=(()=>{class a{constructor(t,r,o,s){this.fb=t,this.studentService=r,this.route=o,this.router=s,this.isEdit=!1,this.id=null}ngOnInit(){this.form=this.fb.group({studentCode:["",S.required],name:["",S.required],gender:["Nam",S.required],birthDate:["",S.required],class:["",S.required],course:["",S.required]});let t=this.route.snapshot.paramMap.get("id");t&&(this.id=+t,this.isEdit=!0,this.studentService.getById(this.id).subscribe(r=>{if(r.birthDate){let o=new Date(r.birthDate);o.getFullYear()>1900?r.birthDate=o.toISOString().substring(0,10):r.birthDate=""}this.form.patchValue({studentCode:r.studentCode,name:r.name,gender:r.gender,birthDate:r.birthDate,class:r.class,course:r.course})}))}submit(){if(this.form.invalid)return;let t=Me({},this.form.value);t.birthDate&&(t.birthDate=new Date(t.birthDate).toISOString());let r={code:t.studentCode,name:t.name,gender:t.gender,birthDate:t.birthDate,class:t.class,course:t.course};this.isEdit&&this.id!==null&&this.id!==void 0&&(r.id=this.id),this.isEdit?this.studentService.update(this.id,r).subscribe({next:()=>this.router.navigate(["/admin/students"]),error:o=>{console.error("Error when saving student:",o),alert("C\xF3 l\u1ED7i khi c\u1EADp nh\u1EADt sinh vi\xEAn!")}}):this.studentService.create(r).subscribe({next:()=>this.router.navigate(["/admin/students"]),error:o=>{console.error("Error when creating student:",o),alert("C\xF3 l\u1ED7i khi th\xEAm sinh vi\xEAn!")}})}static{this.\u0275fac=function(r){return new(r||a)(p(X),p(oe),p(L),p(P))}}static{this.\u0275cmp=b({type:a,selectors:[["app-student-form"]],standalone:!0,features:[x],decls:54,vars:16,consts:[[1,"container","mt-4"],[1,"mb-4"],[1,"fw-bold"],["novalidate","",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-md-6"],["for","studentCode",1,"form-label"],["type","text","id","studentCode","formControlName","studentCode",1,"form-control"],[1,"invalid-feedback"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","gender",1,"form-label"],["id","gender","formControlName","gender",1,"form-select"],["value",""],["value","Nam"],["value","N\u1EEF"],["for","birthDate",1,"form-label"],["type","date","id","birthDate","formControlName","birthDate",1,"form-control"],["for","class",1,"form-label"],["type","text","id","class","formControlName","class",1,"form-control"],["for","course",1,"form-label"],["type","text","id","course","formControlName","course",1,"form-control"],[1,"d-flex","justify-content-between","mt-4"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(r,o){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),n(3),e(),h(4,"hr"),e(),i(5,"form",3),f("ngSubmit",function(){return o.submit()}),i(6,"div",4)(7,"div",5)(8,"label",6),n(9,"\u{1F393} M\xE3 sinh vi\xEAn"),e(),h(10,"input",7),i(11,"div",8),n(12,"Vui l\xF2ng nh\u1EADp m\xE3 sinh vi\xEAn"),e()(),i(13,"div",5)(14,"label",9),n(15,"\u{1F464} H\u1ECD t\xEAn"),e(),h(16,"input",10),i(17,"div",8),n(18,"Vui l\xF2ng nh\u1EADp h\u1ECD t\xEAn"),e()(),i(19,"div",5)(20,"label",11),n(21,"\u26A7\uFE0F Gi\u1EDBi t\xEDnh"),e(),i(22,"select",12)(23,"option",13),n(24,"-- Ch\u1ECDn gi\u1EDBi t\xEDnh --"),e(),i(25,"option",14),n(26,"Nam"),e(),i(27,"option",15),n(28,"N\u1EEF"),e()(),i(29,"div",8),n(30,"Vui l\xF2ng ch\u1ECDn gi\u1EDBi t\xEDnh"),e()(),i(31,"div",5)(32,"label",16),n(33,"\u{1F4C5} Ng\xE0y sinh"),e(),h(34,"input",17),i(35,"div",8),n(36,"Vui l\xF2ng ch\u1ECDn ng\xE0y sinh"),e()(),i(37,"div",5)(38,"label",18),n(39,"\u{1F3EB} L\u1EDBp"),e(),h(40,"input",19),i(41,"div",8),n(42,"Vui l\xF2ng nh\u1EADp l\u1EDBp"),e()(),i(43,"div",5)(44,"label",20),n(45,"\u{1F4DA} Kho\xE1 h\u1ECDc"),e(),h(46,"input",21),i(47,"div",8),n(48,"Vui l\xF2ng nh\u1EADp kho\xE1 h\u1ECDc"),e()()(),i(49,"div",22)(50,"button",23),n(51),e(),i(52,"button",24),f("click",function(){return o.router.navigate(["/admin/students"])}),n(53," \u2B05\uFE0F Quay l\u1EA1i "),e()()()()),r&2){let s,c,_,Z,be,xe;l(3),u(o.isEdit?"\u270F\uFE0F C\u1EADp nh\u1EADt sinh vi\xEAn":"\u2795 Th\xEAm sinh vi\xEAn m\u1EDBi"),l(2),d("formGroup",o.form),l(5),F("is-invalid",((s=o.form.get("studentCode"))==null?null:s.invalid)&&((s=o.form.get("studentCode"))==null?null:s.touched)),l(6),F("is-invalid",((c=o.form.get("name"))==null?null:c.invalid)&&((c=o.form.get("name"))==null?null:c.touched)),l(6),F("is-invalid",((_=o.form.get("gender"))==null?null:_.invalid)&&((_=o.form.get("gender"))==null?null:_.touched)),l(12),F("is-invalid",((Z=o.form.get("birthDate"))==null?null:Z.invalid)&&((Z=o.form.get("birthDate"))==null?null:Z.touched)),l(6),F("is-invalid",((be=o.form.get("class"))==null?null:be.invalid)&&((be=o.form.get("class"))==null?null:be.touched)),l(6),F("is-invalid",((xe=o.form.get("course"))==null?null:xe.invalid)&&((xe=o.form.get("course"))==null?null:xe.touched)),l(4),d("disabled",o.form.invalid),l(),E(" \u2705 ",o.isEdit?"C\u1EADp nh\u1EADt":"Th\xEAm m\u1EDBi"," ")}},dependencies:[C,$,Q,he,ge,O,pe,R,z,ie,ne,D],encapsulation:2})}}return a})();var Tt=(a,m)=>({"text-success fw-bold":a,"text-danger fw-bold":m});function Pt(a,m){if(a&1&&(i(0,"tr")(1,"td"),n(2),e(),i(3,"td"),n(4),e(),i(5,"td"),n(6),e(),i(7,"td"),n(8),e(),i(9,"td"),n(10),e(),i(11,"td")(12,"span",17),n(13),e()()()),a&2){let t,r,o,s=m.$implicit,c=m.index;l(2),u(c+1),l(2),u(s.name),l(2),u((t=s.processPoint)!==null&&t!==void 0?t:"-"),l(2),u((r=s.componentPoint)!==null&&r!==void 0?r:"-"),l(2),u((o=s.finalPoint)!==null&&o!==void 0?o:"-"),l(2),d("ngClass",le(7,Tt,s.isPassed===!0,s.isPassed===!1)),l(),E(" ",s.isPassed===!0?"\u2714 \u0110\u1EADu":s.isPassed===!1?"\u2718 R\u1EDBt":"-"," ")}}function Lt(a,m){if(a&1&&(i(0,"div",12)(1,"h5",13),n(2,"\u2705 B\u1EA3ng \u0111i\u1EC3m"),e(),i(3,"table",14)(4,"thead",15)(5,"tr")(6,"th"),n(7,"#"),e(),i(8,"th"),n(9,"M\xF4n h\u1ECDc"),e(),i(10,"th"),n(11,"\u0110i\u1EC3m qu\xE1 tr\xECnh"),e(),i(12,"th"),n(13,"\u0110i\u1EC3m th\xE0nh ph\u1EA7n"),e(),i(14,"th"),n(15,"\u0110i\u1EC3m cu\u1ED1i"),e(),i(16,"th"),n(17,"K\u1EBFt qu\u1EA3"),e()()(),i(18,"tbody"),v(19,Pt,14,10,"tr",16),e()()()),a&2){let t=g();l(19),d("ngForOf",t.subjects)}}function Nt(a,m){if(a&1&&(i(0,"tr")(1,"td"),n(2),e(),i(3,"td"),n(4),e(),i(5,"td"),n(6),A(7,"date"),e(),i(8,"td"),n(9),e(),i(10,"td"),n(11),A(12,"date"),e(),i(13,"td"),n(14),e()()),a&2){let t=m.$implicit,r=m.index;l(2),u(r+1),l(2),u(t.name),l(2),u(w(7,6,t.startDate,"dd/MM/yyyy")),l(3),u(t.studyTime),l(2),u(w(12,9,t.examDate,"dd/MM/yyyy")),l(3),u(t.examTime)}}function Bt(a,m){if(a&1&&(i(0,"div",18)(1,"h5",19),n(2,"\u{1F4C5} L\u1ECBch h\u1ECDc & thi"),e(),i(3,"table",14)(4,"thead",15)(5,"tr")(6,"th"),n(7,"#"),e(),i(8,"th"),n(9,"M\xF4n h\u1ECDc"),e(),i(10,"th"),n(11,"Ng\xE0y b\u1EAFt \u0111\u1EA7u"),e(),i(12,"th"),n(13,"Th\u1EDDi gian h\u1ECDc"),e(),i(14,"th"),n(15,"Ng\xE0y thi"),e(),i(16,"th"),n(17,"Th\u1EDDi gian thi"),e()()(),i(18,"tbody"),v(19,Nt,15,12,"tr",16),e()()()),a&2){let t=g();l(19),d("ngForOf",t.subjects)}}var lt=(()=>{class a{constructor(t,r,o){this.route=t,this.studentService=r,this.http=o,this.student=null,this.subjects=[],this.showScores=!1,this.showSchedule=!1}ngOnInit(){let t=Number(this.route.snapshot.paramMap.get("id"));isNaN(t)||(this.loadStudent(t),this.loadSubjectsAndScores(t))}loadStudent(t){this.studentService.getById(t).subscribe({next:r=>this.student=r,error:r=>console.error("L\u1ED7i khi t\u1EA3i sinh vi\xEAn:",r)})}loadSubjectsAndScores(t){this.http.get(`https://localhost:7082/api/Subject/schedule-and-score/${t}`).subscribe({next:r=>this.subjects=r.data,error:r=>console.error("L\u1ED7i khi t\u1EA3i m\xF4n h\u1ECDc:",r)})}toggleScores(){this.showScores=!this.showScores}toggleSchedule(){this.showSchedule=!this.showSchedule}static{this.\u0275fac=function(r){return new(r||a)(p(L),p(oe),p(K))}}static{this.\u0275cmp=b({type:a,selectors:[["app-student-detail"]],standalone:!0,features:[x],decls:42,vars:13,consts:[[1,"container","mt-4"],[1,"mb-4","text-primary","fw-bold"],[1,"card","shadow-sm","mb-3","border-primary"],[1,"card-body"],[1,"row","mb-2"],[1,"col-md-6"],[1,"d-flex","gap-2","mb-4"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-outline-success",3,"click"],["routerLink","/admin/students",1,"btn","btn-secondary","ms-auto"],["class","table-responsive mb-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"table-responsive","mb-4"],[1,"text-success","fw-bold"],[1,"table","table-bordered","table-striped","align-middle"],[1,"table-dark"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"table-responsive"],[1,"text-primary","fw-bold"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"h3",1),n(2,"\u{1F4C4} Th\xF4ng tin sinh vi\xEAn"),e(),i(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"strong"),n(8,"\u{1F393} M\xE3 SV:"),e(),n(9),e(),i(10,"div",5)(11,"strong"),n(12,"\u{1F464} H\u1ECD t\xEAn:"),e(),n(13),e()(),i(14,"div",4)(15,"div",5)(16,"strong"),n(17,"\u{1F3EB} L\u1EDBp:"),e(),n(18),e(),i(19,"div",5)(20,"strong"),n(21,"\u{1F4DA} Kho\xE1:"),e(),n(22),e()(),i(23,"div",4)(24,"div",5)(25,"strong"),n(26,"\u26A7\uFE0F Gi\u1EDBi t\xEDnh:"),e(),n(27),e(),i(28,"div",5)(29,"strong"),n(30,"\u{1F4C5} Ng\xE0y sinh:"),e(),n(31),A(32,"date"),e()()()(),i(33,"div",6)(34,"button",7),f("click",function(){return o.toggleScores()}),n(35),e(),i(36,"button",8),f("click",function(){return o.toggleSchedule()}),n(37),e(),i(38,"a",9),n(39,"\u2B05 Quay l\u1EA1i"),e()(),v(40,Lt,20,1,"div",10)(41,Bt,20,1,"div",11),e()),r&2&&(l(9),E(" ",o.student==null?null:o.student.studentCode,""),l(4),E(" ",o.student==null?null:o.student.name,""),l(5),E(" ",o.student==null?null:o.student.class,""),l(4),E(" ",o.student==null?null:o.student.course,""),l(5),E(" ",o.student==null?null:o.student.gender,""),l(4),E(" ",w(32,10,o.student==null?null:o.student.birthDate,"dd/MM/yyyy"),""),l(4),E(" ",o.showScores?"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F \u1EA8n \u0111i\u1EC3m s\u1ED1":"\u{1F4CA} Xem \u0111i\u1EC3m s\u1ED1"," "),l(2),E(" ",o.showSchedule?"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F \u1EA8n l\u1ECBch h\u1ECDc":"\u{1F4C5} Xem l\u1ECBch h\u1ECDc"," "),l(3),d("ngIf",o.showScores&&(o.subjects==null?null:o.subjects.length)),l(),d("ngIf",o.showSchedule&&(o.subjects==null?null:o.subjects.length)))},dependencies:[C,de,V,k,H,D,I,He],encapsulation:2})}}return a})();var Vt=()=>["/admin/subjects/add"],Ot=a=>["/admin/subjects/detail",a],Rt=a=>["/admin/subjects/edit",a],Gt=a=>["/admin/subjects",a,"students"],Wt=a=>["/admin/subjects",a,"register-student"],qt=()=>[];function Ht(a,m){if(a&1){let t=B();se(0),i(1,"tr")(2,"td"),n(3),e(),i(4,"td"),n(5),e(),i(6,"td"),n(7),e(),i(8,"td"),n(9),e(),i(10,"td"),n(11),e(),i(12,"td"),n(13),e(),i(14,"td"),n(15),A(16,"date"),e(),i(17,"td"),n(18),e(),i(19,"td"),n(20),A(21,"date"),e(),i(22,"td"),n(23),e(),i(24,"td")(25,"a",9),n(26,"Chi ti\u1EBFt"),e(),i(27,"a",10),n(28,"S\u1EEDa"),e(),i(29,"button",11),f("click",function(){let o=M(t).$implicit,s=g();return T(s.delete(o.id))}),n(30,"Xo\xE1"),e()()(),i(31,"tr")(32,"td",12)(33,"a",13),n(34," \u{1F465} Xem sinh vi\xEAn \u0111\xE3 \u0111\u0103ng k\xFD "),e(),i(35,"a",14),n(36," \u2795 \u0110\u0103ng k\xFD m\xF4n h\u1ECDc "),e()()(),ue()}if(a&2){let t=m.$implicit,r=m.index,o=g();l(3),u((o.currentPage-1)*o.pageSize+r+1),l(2),u(t.name),l(2),u(t.credit),l(2),u(t.sessionCount),l(2),u(t.processWeight),l(2),u(t.componentWeight),l(2),u(w(16,14,t.startDate,"dd/MM/yyyy")),l(3),u(t.studyTime),l(2),u(w(21,17,t.examDate,"dd/MM/yyyy")),l(3),u(t.examTime),l(2),d("routerLink",U(20,Ot,t.id)),l(2),d("routerLink",U(22,Rt,t.id)),l(6),d("routerLink",U(24,Gt,t.id)),l(2),d("routerLink",U(26,Wt,t.id))}}function Kt(a,m){a&1&&(i(0,"tr")(1,"td",15),n(2,"Kh\xF4ng c\xF3 m\xF4n h\u1ECDc n\xE0o."),e()())}function $t(a,m){if(a&1){let t=B();i(0,"li",18)(1,"button",19),f("click",function(){let o=M(t).index,s=g(2);return T(s.goToPage(o+1))}),n(2),e()()}if(a&2){let t=m.index,r=g(2);F("active",r.currentPage===t+1),l(2),u(t+1)}}function Ut(a,m){if(a&1){let t=B();i(0,"nav",16)(1,"ul",17)(2,"li",18)(3,"button",19),f("click",function(){M(t);let o=g();return T(o.goToPage(o.currentPage-1))}),n(4,"\xAB"),e()(),v(5,$t,3,3,"li",20),i(6,"li",18)(7,"button",19),f("click",function(){M(t);let o=g();return T(o.goToPage(o.currentPage+1))}),n(8,"\xBB"),e()()()()}if(a&2){let t=g();l(2),F("disabled",t.currentPage===1),l(3),d("ngForOf",y(5,qt).constructor(t.totalPages)),l(),F("disabled",t.currentPage===t.totalPages)}}var st=(()=>{class a{constructor(t,r){this.subjectService=t,this.router=r,this.subjects=[],this.pagedSubjects=[],this.currentPage=1,this.pageSize=10,this.totalPages=0}ngOnInit(){this.loadSubjects()}loadSubjects(){this.subjectService.getAll().subscribe(t=>{this.subjects=t,this.totalPages=Math.ceil(t.length/this.pageSize),this.updatePagedSubjects()})}updatePagedSubjects(){let t=(this.currentPage-1)*this.pageSize;this.pagedSubjects=this.subjects.slice(t,t+this.pageSize)}goToPage(t){t<1||t>this.totalPages||(this.currentPage=t,this.updatePagedSubjects())}delete(t){confirm("B\u1EA1n c\xF3 ch\u1EAFc mu\u1ED1n xo\xE1 m\xF4n h\u1ECDc n\xE0y?")&&this.subjectService.delete(t).subscribe(()=>this.loadSubjects())}static{this.\u0275fac=function(r){return new(r||a)(p(J),p(P))}}static{this.\u0275cmp=b({type:a,selectors:[["app-subject-list"]],standalone:!0,features:[x],decls:38,vars:5,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],["routerLink","/admin/subjects/search",1,"btn","btn-success","me-2"],[1,"btn","btn-primary",3,"routerLink"],[1,"table","table-bordered","table-hover","table-striped"],[1,"table-dark"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","d-flex justify-content-center mt-3",4,"ngIf"],[1,"btn","btn-sm","btn-info","me-1",3,"routerLink"],[1,"btn","btn-sm","btn-warning","me-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","11",1,"text-end"],[1,"btn","btn-outline-secondary","btn-sm","me-2",3,"routerLink"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],["colspan","11",1,"text-center"],[1,"d-flex","justify-content-center","mt-3"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),n(3,"Danh s\xE1ch m\xF4n h\u1ECDc"),e(),i(4,"div")(5,"a",2),n(6,"\u{1F50D} T\xECm m\xF4n h\u1ECDc"),e(),i(7,"a",3),n(8,"+ Th\xEAm m\xF4n h\u1ECDc"),e()()(),i(9,"table",4)(10,"thead",5)(11,"tr")(12,"th"),n(13,"#"),e(),i(14,"th"),n(15,"T\xEAn m\xF4n"),e(),i(16,"th"),n(17,"T\xEDn ch\u1EC9"),e(),i(18,"th"),n(19,"S\u1ED1 bu\u1ED5i"),e(),i(20,"th"),n(21,"Tr\u1ECDng s\u1ED1 QT (%)"),e(),i(22,"th"),n(23,"Tr\u1ECDng s\u1ED1 TP (%)"),e(),i(24,"th"),n(25,"Ng\xE0y h\u1ECDc"),e(),i(26,"th"),n(27,"Gi\u1EDD h\u1ECDc"),e(),i(28,"th"),n(29,"Ng\xE0y thi"),e(),i(30,"th"),n(31,"Gi\u1EDD thi"),e(),i(32,"th"),n(33,"H\xE0nh \u0111\u1ED9ng"),e()()(),i(34,"tbody"),v(35,Ht,37,28,"ng-container",6)(36,Kt,3,0,"tr",7),e()(),v(37,Ut,9,6,"nav",8),e()),r&2&&(l(7),d("routerLink",y(4,Vt)),l(28),d("ngForOf",o.pagedSubjects),l(),d("ngIf",o.subjects.length===0),l(),d("ngIf",o.totalPages>1))},dependencies:[C,V,k,H,D,I],encapsulation:2})}}return a})();var zt=()=>["/admin/subjects"],we=(()=>{class a{constructor(t,r,o,s){this.fb=t,this.subjectService=r,this.route=o,this.router=s,this.id=null,this.isEdit=!1}ngOnInit(){this.form=this.fb.group({name:["",S.required],sessionCount:[0,[S.required,S.min(1)]],credit:[1,[S.required,S.min(1)]],processWeight:[50,[S.required,S.min(0),S.max(100)]],componentWeight:[50,[S.required,S.min(0),S.max(100)]],startDate:["",S.required],studyTime:["",S.required],examDate:["",S.required],examTime:["",S.required]});let t=this.route.snapshot.paramMap.get("id");t&&(this.id=+t,this.isEdit=!0,this.subjectService.getById(this.id).subscribe(r=>{if(r){let o=s=>new Date(s).toISOString().split("T")[0];this.form.patchValue({name:r.name,sessionCount:+r.sessionCount,credit:+r.credit,processWeight:+r.processWeight,componentWeight:+r.componentWeight,startDate:o(r.startDate),studyTime:r.studyTime,examDate:o(r.examDate),examTime:r.examTime})}}))}submit(){if(this.form.invalid)return;let t={id:this.id??0,name:this.form.value.name,sessionCount:+this.form.value.sessionCount,credit:+this.form.value.credit,processWeight:+this.form.value.processWeight,componentWeight:+this.form.value.componentWeight,startDate:this.form.value.startDate,studyTime:this.form.value.studyTime,examDate:this.form.value.examDate,examTime:this.form.value.examTime};console.log("\u{1F4E6} G\u1EEDi subject:",t),(this.isEdit?this.subjectService.update(this.id,t):this.subjectService.create(t)).subscribe(()=>{this.router.navigateByUrl("/admin/subjects",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/admin/subjects"])})})}static{this.\u0275fac=function(r){return new(r||a)(p(X),p(J),p(L),p(P))}}static{this.\u0275cmp=b({type:a,selectors:[["app-subject-form"]],standalone:!0,features:[x],decls:46,vars:6,consts:[[1,"container","mt-4"],[1,"mt-4",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-md-6"],["for","name",1,"form-label"],["id","name","type","text","formControlName","name",1,"form-control"],[1,"col-md-3"],["for","credit",1,"form-label"],["id","credit","type","number","formControlName","credit","min","1",1,"form-control"],["for","sessionCount",1,"form-label"],["id","sessionCount","type","number","formControlName","sessionCount","min","1",1,"form-control"],["for","processWeight",1,"form-label"],["id","processWeight","type","number","formControlName","processWeight","min","0","max","100",1,"form-control"],["for","componentWeight",1,"form-label"],["id","componentWeight","type","number","formControlName","componentWeight","min","0","max","100",1,"form-control"],["for","startDate",1,"form-label"],["id","startDate","type","date","formControlName","startDate",1,"form-control"],["for","studyTime",1,"form-label"],["id","studyTime","type","time","formControlName","studyTime",1,"form-control"],["for","examDate",1,"form-label"],["id","examDate","type","date","formControlName","examDate",1,"form-control"],["for","examTime",1,"form-label"],["id","examTime","type","time","formControlName","examTime",1,"form-control"],[1,"mt-4"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],[1,"btn","btn-secondary",3,"routerLink"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"h2"),n(2),e(),i(3,"form",1),f("ngSubmit",function(){return o.submit()}),i(4,"div",2)(5,"div",3)(6,"label",4),n(7,"T\xEAn m\xF4n h\u1ECDc"),e(),h(8,"input",5),e(),i(9,"div",6)(10,"label",7),n(11,"T\xEDn ch\u1EC9"),e(),h(12,"input",8),e(),i(13,"div",6)(14,"label",9),n(15,"S\u1ED1 bu\u1ED5i h\u1ECDc"),e(),h(16,"input",10),e(),i(17,"div",6)(18,"label",11),n(19,"Tr\u1ECDng s\u1ED1 qu\xE1 tr\xECnh (%)"),e(),h(20,"input",12),e(),i(21,"div",6)(22,"label",13),n(23,"Tr\u1ECDng s\u1ED1 th\xE0nh ph\u1EA7n (%)"),e(),h(24,"input",14),e(),i(25,"div",6)(26,"label",15),n(27,"Ng\xE0y b\u1EAFt \u0111\u1EA7u"),e(),h(28,"input",16),e(),i(29,"div",6)(30,"label",17),n(31,"Gi\u1EDD h\u1ECDc"),e(),h(32,"input",18),e(),i(33,"div",6)(34,"label",19),n(35,"Ng\xE0y thi"),e(),h(36,"input",20),e(),i(37,"div",6)(38,"label",21),n(39,"Gi\u1EDD thi"),e(),h(40,"input",22),e()(),i(41,"div",23)(42,"button",24),n(43),e(),i(44,"a",25),n(45,"Quay l\u1EA1i"),e()()()()),r&2&&(l(2),E("",o.isEdit?"Ch\u1EC9nh s\u1EEDa":"Th\xEAm m\u1EDBi"," m\xF4n h\u1ECDc"),l(),d("formGroup",o.form),l(39),d("disabled",o.form.invalid),l(),E(" ",o.isEdit?"C\u1EADp nh\u1EADt":"Th\xEAm m\u1EDBi"," "),l(),d("routerLink",y(5,zt)))},dependencies:[C,$,Q,O,_e,R,z,Xe,Qe,ie,ne,D,I],encapsulation:2})}}return a})();var Qt=()=>["/admin/subjects"],Xt=a=>["/admin/subjects/edit",a];function Jt(a,m){a&1&&(i(0,"div",2)(1,"div",3)(2,"span",4),n(3,"\u0110ang t\u1EA3i..."),e()()())}function Yt(a,m){if(a&1&&(i(0,"div",5)(1,"div",6)(2,"div",7)(3,"h4",8),n(4,"\u{1F4DA} Chi ti\u1EBFt m\xF4n h\u1ECDc"),e(),i(5,"ul",9)(6,"li",10)(7,"strong"),n(8,"\u{1F4DD} T\xEAn m\xF4n:"),e(),n(9),e(),i(10,"li",10)(11,"strong"),n(12,"\u{1F393} T\xEDn ch\u1EC9:"),e(),n(13),e(),i(14,"li",10)(15,"strong"),n(16,"\u{1F4DA} S\u1ED1 bu\u1ED5i h\u1ECDc:"),e(),n(17),e(),i(18,"li",10)(19,"strong"),n(20,"\u{1F4CA} Tr\u1ECDng s\u1ED1 qu\xE1 tr\xECnh:"),e(),n(21),e(),i(22,"li",10)(23,"strong"),n(24,"\u{1F4CA} Tr\u1ECDng s\u1ED1 th\xE0nh ph\u1EA7n:"),e(),n(25),e(),i(26,"li",10)(27,"strong"),n(28,"\u{1F4C6} Ng\xE0y b\u1EAFt \u0111\u1EA7u h\u1ECDc:"),e(),n(29),A(30,"date"),e(),i(31,"li",10)(32,"strong"),n(33,"\u{1F552} Gi\u1EDD h\u1ECDc:"),e(),n(34),e(),i(35,"li",10)(36,"strong"),n(37,"\u{1F4DD} Ng\xE0y thi:"),e(),n(38),A(39,"date"),e(),i(40,"li",10)(41,"strong"),n(42,"\u23F0 Gi\u1EDD thi:"),e(),n(43),e()(),i(44,"div",11)(45,"a",12),n(46," \u2190 Quay l\u1EA1i danh s\xE1ch "),e(),i(47,"a",13),n(48," \u270F\uFE0F Ch\u1EC9nh s\u1EEDa "),e()()()()()),a&2){let t=g();l(9),E(" ",t.subject.name,""),l(4),E(" ",t.subject.credit,""),l(4),E(" ",t.subject.sessionCount,""),l(4),E(" ",t.subject.processWeight,"%"),l(4),E(" ",t.subject.componentWeight,"%"),l(4),E(" ",w(30,11,t.subject.startDate,"dd/MM/yyyy"),""),l(5),E(" ",t.subject.studyTime,""),l(4),E(" ",w(39,14,t.subject.examDate,"dd/MM/yyyy"),""),l(5),E(" ",t.subject.examTime,""),l(2),d("routerLink",y(17,Qt)),l(2),d("routerLink",U(18,Xt,t.subject.id))}}var ut=(()=>{class a{constructor(t,r){this.subjectService=t,this.route=r,this.loading=!0}ngOnInit(){let t=+this.route.snapshot.paramMap.get("id");this.subjectService.getById(t).subscribe({next:r=>{this.subject=r,this.loading=!1}})}static{this.\u0275fac=function(r){return new(r||a)(p(J),p(L))}}static{this.\u0275cmp=b({type:a,selectors:[["app-subject-detail"]],standalone:!0,features:[x],decls:2,vars:2,consts:[["class","d-flex justify-content-center align-items-center mt-5",4,"ngIf"],["class","container mt-5",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","mt-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"container","mt-5"],[1,"card","shadow"],[1,"card-body"],[1,"card-title","mb-4"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"mt-4","d-flex","gap-2"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"btn","btn-outline-primary",3,"routerLink"]],template:function(r,o){r&1&&v(0,Jt,4,0,"div",0)(1,Yt,49,20,"div",1),r&2&&(d("ngIf",o.loading),l(),d("ngIf",!o.loading&&o.subject))},dependencies:[C,k,H,D,I],encapsulation:2})}}return a})();function Zt(a,m){if(a&1){let t=B();i(0,"tr")(1,"td",10),n(2),e(),i(3,"td"),n(4),e(),i(5,"td"),n(6),e(),i(7,"td"),n(8),e(),i(9,"td"),n(10),e(),i(11,"td",10)(12,"button",11),f("click",function(){let o=M(t).$implicit,s=g();return T(s.unregisterStudent(o.id))}),n(13," \u274C Hu\u1EF7 \u0111\u0103ng k\xFD "),e()()()}if(a&2){let t=m.$implicit,r=m.index;l(2),u(r+1),l(2),u(t.studentCode),l(2),u(t.name),l(2),u(t.class),l(2),u(t.course)}}function ei(a,m){a&1&&(i(0,"tr")(1,"td",12),n(2," Kh\xF4ng c\xF3 sinh vi\xEAn n\xE0o \u0111\u0103ng k\xFD. "),e()())}var dt=(()=>{class a{constructor(t,r,o){this.route=t,this.subjectService=r,this.location=o,this.students=[]}ngOnInit(){this.subjectId=+this.route.snapshot.paramMap.get("id"),this.subjectService.getRegisteredStudents(this.subjectId).subscribe(t=>this.students=t)}goBack(){this.location.back()}unregisterStudent(t){confirm("B\u1EA1n c\xF3 ch\u1EAFc mu\u1ED1n hu\u1EF7 \u0111\u0103ng k\xFD m\xF4n h\u1ECDc c\u1EE7a sinh vi\xEAn n\xE0y kh\xF4ng?")&&this.subjectService.unregisterStudent(this.subjectId,t).subscribe({next:()=>{alert("\u2705 Hu\u1EF7 \u0111\u0103ng k\xFD th\xE0nh c\xF4ng!"),this.students=this.students.filter(r=>r.id!==t)},error:r=>{r.status===403?alert("\u26A0\uFE0F B\u1EA1n kh\xF4ng c\xF3 quy\u1EC1n hu\u1EF7 \u0111\u0103ng k\xFD."):alert("\u274C L\u1ED7i khi hu\u1EF7 \u0111\u0103ng k\xFD m\xF4n h\u1ECDc.")}})}static{this.\u0275fac=function(r){return new(r||a)(p(L),p(J),p(Ne))}}static{this.\u0275cmp=b({type:a,selectors:[["app-subject-students"]],standalone:!0,features:[x],decls:25,vars:2,consts:[[1,"container","mt-5"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],[1,"btn","btn-outline-secondary",3,"click"],[1,"table-responsive"],[1,"table","table-hover","table-bordered","align-middle"],[1,"table-dark","text-center"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-center"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","6",1,"text-center","text-muted"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),n(3,"\u{1F4DA} Danh s\xE1ch sinh vi\xEAn \u0111\u0103ng k\xFD m\xF4n h\u1ECDc"),e(),i(4,"button",3),f("click",function(){return o.goBack()}),n(5," \u2190 Quay l\u1EA1i "),e()(),i(6,"div",4)(7,"table",5)(8,"thead",6)(9,"tr")(10,"th",7),n(11,"#"),e(),i(12,"th",7),n(13,"M\xE3 SV"),e(),i(14,"th",7),n(15,"H\u1ECD t\xEAn"),e(),i(16,"th",7),n(17,"L\u1EDBp"),e(),i(18,"th",7),n(19,"Kho\xE1 h\u1ECDc"),e(),i(20,"th",7),n(21,"H\xE0nh \u0111\u1ED9ng"),e()()(),i(22,"tbody"),v(23,Zt,14,5,"tr",8)(24,ei,3,0,"tr",9),e()()()()),r&2&&(l(23),d("ngForOf",o.students),l(),d("ngIf",o.students.length===0))},dependencies:[C,V,k,D],encapsulation:2})}}return a})();var ti=(a,m,t)=>({"text-success":a,"text-danger":m,"text-muted":t}),ii=()=>["/admin/scores/input"],ni=(a,m)=>({studentId:a,subjectId:m}),ri=()=>[];function oi(a,m){a&1&&(i(0,"div",6),h(1,"div",7),e())}function ai(a,m){if(a&1&&(i(0,"tr")(1,"td"),n(2),e(),i(3,"td"),n(4),e(),i(5,"td"),n(6),e(),i(7,"td"),n(8),e(),i(9,"td"),n(10),e(),i(11,"td")(12,"span",15),n(13),e()(),i(14,"td")(15,"a",16),n(16," Ch\u1EC9nh s\u1EEDa "),e()()()),a&2){let t,r,o,s=m.$implicit,c=m.index;l(2),u(c+1),l(2),u(s.subjectName),l(2),u((t=s.processPoint)!==null&&t!==void 0?t:"-"),l(2),u((r=s.componentPoint)!==null&&r!==void 0?r:"-"),l(2),u((o=s.finalPoint)!==null&&o!==void 0?o:"-"),l(2),d("ngClass",Pe(9,ti,s.isPassed===!0,s.isPassed===!1,s.isPassed===null)),l(),E(" ",s.isPassed===!0?"\u2714":s.isPassed===!1?"\u2718":"-"," "),l(2),d("routerLink",y(13,ii))("queryParams",le(14,ni,s.studentId,s.subjectId))}}function li(a,m){if(a&1&&(i(0,"div",10)(1,"h5",11),n(2),i(3,"strong"),n(4),e(),n(5),e(),i(6,"table",12)(7,"thead",13)(8,"tr")(9,"th"),n(10,"#"),e(),i(11,"th"),n(12,"M\xF4n h\u1ECDc"),e(),i(13,"th"),n(14,"Qu\xE1 tr\xECnh"),e(),i(15,"th"),n(16,"Th\xE0nh ph\u1EA7n"),e(),i(17,"th"),n(18,"\u0110i\u1EC3m cu\u1ED1i"),e(),i(19,"th"),n(20,"\u0110\u1EADu"),e(),i(21,"th"),n(22,"H\xE0nh \u0111\u1ED9ng"),e()()(),i(23,"tbody"),v(24,ai,17,17,"tr",14),e()()()),a&2){let t=m.$implicit,r=m.index,o=g(2);l(2),E(" ",(o.currentPage-1)*o.pageSize+r+1,". Sinh vi\xEAn: "),l(2),u(t.studentName),l(),E(" (M\xE3 SV: ",t.studentId,") "),l(19),d("ngForOf",t.scores)}}function si(a,m){if(a&1){let t=B();i(0,"li",19)(1,"a",20),f("click",function(){let o=M(t).index,s=g(3);return T(s.goToPage(o+1))}),n(2),e()()}if(a&2){let t=m.index,r=g(3);F("active",r.currentPage===t+1),l(2),u(t+1)}}function ui(a,m){if(a&1){let t=B();i(0,"nav",17)(1,"ul",18)(2,"li",19)(3,"a",20),f("click",function(){M(t);let o=g(2);return T(o.goToPage(o.currentPage-1))}),n(4,"\xAB"),e()(),v(5,si,3,3,"li",21),i(6,"li",19)(7,"a",20),f("click",function(){M(t);let o=g(2);return T(o.goToPage(o.currentPage+1))}),n(8,"\xBB"),e()()()()}if(a&2){let t=g(2);l(2),F("disabled",t.currentPage===1),l(3),d("ngForOf",y(5,ri).constructor(t.totalPages)),l(),F("disabled",t.currentPage===t.totalPages)}}function di(a,m){if(a&1&&(se(0),v(1,li,25,4,"div",8)(2,ui,9,6,"nav",9),ue()),a&2){let t=g();l(),d("ngForOf",t.pagedGroups),l(),d("ngIf",t.totalPages>1)}}function mi(a,m){a&1&&(i(0,"div",22),n(1," Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u \u0111i\u1EC3m n\xE0o. "),e())}var mt=(()=>{class a{constructor(t,r,o){this.fb=t,this.route=r,this.scoreService=o,this.scores=[],this.groupedScores=[],this.filteredGroups=[],this.loading=!1,this.searchTerm="",this.pageSize=5,this.currentPage=1,this.totalPages=0}ngOnInit(){this.form=this.fb.group({studentId:["",S.required],subjectId:["",S.required],processScore:[0,[S.min(0),S.max(10)]],componentScore:[0,[S.min(0),S.max(10)]]}),this.route.queryParams.subscribe(t=>{let r=t.studentId;r?(this.studentId=+r,this.loadScoresByStudent(this.studentId)):this.loadScores(),this.form.patchValue({studentId:r??"",subjectId:t.subjectId??""})})}loadScores(){this.loading=!0,this.scoreService.getAll().subscribe({next:t=>{this.scores=t,this.groupedScores=this.groupScoresByStudent(t),this.applyFilter(),this.loading=!1},error:t=>{console.error("\u274C L\u1ED7i t\u1EA3i danh s\xE1ch \u0111i\u1EC3m:",t),this.loading=!1}})}loadScoresByStudent(t){this.loading=!0,this.scoreService.getByStudent(t).subscribe({next:r=>{this.scores=r,this.groupedScores=this.groupScoresByStudent(r),this.applyFilter(),this.loading=!1},error:r=>{console.error("\u274C L\u1ED7i t\u1EA3i \u0111i\u1EC3m sinh vi\xEAn:",r),this.loading=!1}})}groupScoresByStudent(t){let r={};for(let o of t)r[o.studentId]||(r[o.studentId]={studentId:o.studentId,studentName:o.studentName,scores:[]}),r[o.studentId].scores.push(o);return Object.values(r)}applyFilter(){let t=this.searchTerm.toLowerCase().trim();this.filteredGroups=this.groupedScores.filter(r=>r.studentName.toLowerCase().includes(t)||r.studentId.toString().includes(t)),this.totalPages=Math.ceil(this.filteredGroups.length/this.pageSize),this.currentPage=1}get pagedGroups(){let t=(this.currentPage-1)*this.pageSize;return this.filteredGroups.slice(t,t+this.pageSize)}goToPage(t){t<1||t>this.totalPages||(this.currentPage=t)}static{this.\u0275fac=function(r){return new(r||a)(p(X),p(L),p(Se))}}static{this.\u0275cmp=b({type:a,selectors:[["app-score-list"]],standalone:!0,features:[x],decls:8,vars:4,consts:[[1,"container","mt-4"],[1,"input-group","mb-3","w-50"],["type","text","placeholder","\u{1F50D} T\xECm theo m\xE3 SV ho\u1EB7c t\xEAn SV",1,"form-control",3,"ngModelChange","ngModel"],["class","text-center my-5",4,"ngIf"],[4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"],["class","mb-5",4,"ngFor","ngForOf"],["class","mt-4",4,"ngIf"],[1,"mb-5"],[1,"text-primary"],[1,"table","table-bordered","table-striped"],[1,"table-secondary"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn","btn-sm","btn-primary",3,"routerLink","queryParams"],[1,"mt-4"],[1,"pagination","justify-content-center"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"alert","alert-info"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"h3"),n(2,"Danh s\xE1ch \u0111i\u1EC3m theo t\u1EEBng sinh vi\xEAn"),e(),i(3,"div",1)(4,"input",2),q("ngModelChange",function(c){return W(o.searchTerm,c)||(o.searchTerm=c),c}),f("ngModelChange",function(){return o.applyFilter()}),e()(),v(5,oi,2,0,"div",3)(6,di,3,2,"ng-container",4)(7,mi,2,0,"div",5),e()),r&2&&(l(4),G("ngModel",o.searchTerm),l(),d("ngIf",o.loading),l(),d("ngIf",!o.loading&&o.pagedGroups.length),l(),d("ngIf",!o.loading&&!o.pagedGroups.length))},dependencies:[C,de,V,k,re,O,R,ce,$,D,I],encapsulation:2})}}return a})();function ci(a,m){if(a&1&&(i(0,"div",16),n(1),e()),a&2){let t=g();l(),E(" \u274C ",t.errorMessage," ")}}var ct=(()=>{class a{constructor(t,r,o,s){this.fb=t,this.scoreService=r,this.router=o,this.route=s,this.submitting=!1,this.errorMessage=""}ngOnInit(){this.form=this.fb.group({studentId:["",S.required],subjectId:["",S.required],processScore:[null,[S.min(0),S.max(10)]],componentScore:[null,[S.min(0),S.max(10)]]}),this.route.queryParams.subscribe(t=>{let r=+t.studentId,o=+t.subjectId;r&&o&&(this.form.patchValue({studentId:r,subjectId:o}),this.scoreService.getScoreByStudentAndSubject(r,o).subscribe(s=>{s&&this.form.patchValue({processScore:s.processPoint,componentScore:s.componentPoint})}))})}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.submitting=!0,this.errorMessage="",this.scoreService.inputScore(this.form.value).subscribe({next:()=>{alert("\u2705 Nh\u1EADp \u0111i\u1EC3m th\xE0nh c\xF4ng"),this.router.navigate(["/admin/scores"])},error:t=>{console.error("\u274C L\u1ED7i nh\u1EADp \u0111i\u1EC3m:",t),this.errorMessage=t?.error?.message||"\u0110\xE3 x\u1EA3y ra l\u1ED7i khi nh\u1EADp \u0111i\u1EC3m.",this.submitting=!1}})}goBack(){this.router.navigate(["/admin/scores"])}static{this.\u0275fac=function(r){return new(r||a)(p(X),p(Se),p(P),p(L))}}static{this.\u0275cmp=b({type:a,selectors:[["app-input-score"]],standalone:!0,features:[x],decls:26,vars:4,consts:[[1,"container","mt-4"],[1,"mb-4","text-primary","fw-bold"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","studentId",1,"form-label"],["type","number","id","studentId","formControlName","studentId","readonly","",1,"form-control"],["for","subjectId",1,"form-label"],["type","number","id","subjectId","formControlName","subjectId","readonly","",1,"form-control"],["for","processScore",1,"form-label"],["type","number","step","0.1","id","processScore","formControlName","processScore","placeholder","V\xED d\u1EE5: 7.5 ho\u1EB7c \u0111\u1EC3 tr\u1ED1ng",1,"form-control"],["for","componentScore",1,"form-label"],["type","number","step","0.1","id","componentScore","formControlName","componentScore","placeholder","V\xED d\u1EE5: 8.0 ho\u1EB7c \u0111\u1EC3 tr\u1ED1ng",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"alert","alert-danger","mt-3"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"h3",1),n(2,"\u270F\uFE0F Nh\u1EADp / Ch\u1EC9nh s\u1EEDa \u0110i\u1EC3m"),e(),i(3,"form",2),f("ngSubmit",function(){return o.submit()}),i(4,"div",3)(5,"label",4),n(6,"\u{1F468}\u200D\u{1F393} M\xE3 Sinh Vi\xEAn"),e(),h(7,"input",5),e(),i(8,"div",3)(9,"label",6),n(10,"\u{1F4D8} M\xE3 M\xF4n H\u1ECDc"),e(),h(11,"input",7),e(),i(12,"div",3)(13,"label",8),n(14,"\u{1F4CA} \u0110i\u1EC3m Qu\xE1 Tr\xECnh"),e(),h(15,"input",9),e(),i(16,"div",3)(17,"label",10),n(18,"\u{1F4DD} \u0110i\u1EC3m Th\xE0nh Ph\u1EA7n (Cu\u1ED1i k\u1EF3)"),e(),h(19,"input",11),e(),i(20,"div",12)(21,"button",13),n(22),e(),i(23,"button",14),f("click",function(){return o.goBack()}),n(24," \u2B05 Quay l\u1EA1i "),e()(),v(25,ci,2,1,"div",15),e()()),r&2&&(l(3),d("formGroup",o.form),l(18),d("disabled",o.submitting),l(),E(" ",o.submitting?"\u23F3 \u0110ang l\u01B0u...":"\u2705 L\u01B0u \u0111i\u1EC3m"," "),l(3),d("ngIf",o.errorMessage))},dependencies:[C,k,$,Q,O,_e,R,z,ie,ne],encapsulation:2})}}return a})();var pi=()=>["/student/user-info"],hi=()=>["/student/profile"],gi=()=>["/student/register-subjects"],Ei=()=>["/student/schedule-score"],fi=()=>["/student/progress"],pt=(()=>{class a{static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275cmp=b({type:a,selectors:[["app-dashboard"]],standalone:!0,features:[x],decls:54,vars:10,consts:[[1,"mt-4","text-primary","fw-bold"],[1,"mb-4"],[1,"row","g-4"],[1,"col-12","col-sm-6","col-lg-3"],[1,"text-decoration-none",3,"routerLink"],[1,"card","bg-light","border-0","shadow-sm","h-100","hover-card"],[1,"card-body","text-center"],[1,"mb-2","text-warning","display-6"],[1,"card-title","fw-semibold"],[1,"card-text","text-muted"],[1,"mb-2","text-primary","display-6"],[1,"mb-2","text-success","display-6"],[1,"mb-2","text-info","display-6"],[1,"mb-2","text-secondary","display-6"]],template:function(r,o){r&1&&(i(0,"h2",0),n(1,"\u{1F393} Student Dashboard"),e(),h(2,"hr",1),i(3,"div",2)(4,"div",3)(5,"a",4)(6,"div",5)(7,"div",6)(8,"div",7),n(9,"\u{1F464}"),e(),i(10,"h5",8),n(11,"Th\xF4ng tin c\xE1 nh\xE2n"),e(),i(12,"p",9),n(13,"Xem th\xF4ng tin chi ti\u1EBFt sinh vi\xEAn"),e()()()()(),i(14,"div",3)(15,"a",4)(16,"div",5)(17,"div",6)(18,"div",10),n(19,"\u270F\uFE0F"),e(),i(20,"h5",8),n(21,"C\u1EADp nh\u1EADt h\u1ED3 s\u01A1"),e(),i(22,"p",9),n(23,"Ch\u1EC9nh s\u1EEDa th\xF4ng tin c\xE1 nh\xE2n"),e()()()()(),i(24,"div",3)(25,"a",4)(26,"div",5)(27,"div",6)(28,"div",11),n(29,"\u{1F4DD}"),e(),i(30,"h5",8),n(31,"\u0110\u0103ng k\xFD m\xF4n h\u1ECDc"),e(),i(32,"p",9),n(33,"L\u1EF1a ch\u1ECDn v\xE0 \u0111\u0103ng k\xFD m\xF4n"),e()()()()(),i(34,"div",3)(35,"a",4)(36,"div",5)(37,"div",6)(38,"div",12),n(39,"\u{1F4C5}"),e(),i(40,"h5",8),n(41,"L\u1ECBch h\u1ECDc & \u0110i\u1EC3m"),e(),i(42,"p",9),n(43,"Xem l\u1ECBch h\u1ECDc, l\u1ECBch thi v\xE0 \u0111i\u1EC3m"),e()()()()(),i(44,"div",3)(45,"a",4)(46,"div",5)(47,"div",6)(48,"div",13),n(49,"\u{1F4C8}"),e(),i(50,"h5",8),n(51,"Ti\u1EBFn \u0111\u1ED9 h\u1ECDc t\u1EADp"),e(),i(52,"p",9),n(53,"S\u1ED1 m\xF4n \u0111\xE3 h\u1ECDc, GPA, t\u1EC9 l\u1EC7 qua m\xF4n"),e()()()()()()),r&2&&(l(5),d("routerLink",y(5,pi)),l(10),d("routerLink",y(6,hi)),l(10),d("routerLink",y(7,gi)),l(10),d("routerLink",y(8,Ei)),l(10),d("routerLink",y(9,fi)))},dependencies:[C,D,I]})}}return a})();function Si(a,m){if(a&1&&(i(0,"div",21),n(1),e()),a&2){let t=g();l(),u(t.successMsg)}}function vi(a,m){if(a&1&&(i(0,"div",22),n(1),e()),a&2){let t=g();l(),u(t.errorMsg)}}var ht=(()=>{class a{constructor(t,r){this.studentService=t,this.router=r,this.student={id:0,studentCode:"",name:"",gender:"",birthDate:"",class:"",course:""},this.successMsg="",this.errorMsg=""}goBack(){this.router.navigate(["/student/user-info"])}ngOnInit(){this.studentService.getStudentInfo().subscribe({next:t=>this.student=t,error:()=>this.errorMsg="Kh\xF4ng th\u1EC3 t\u1EA3i d\u1EEF li\u1EC7u sinh vi\xEAn."})}onSubmit(){this.studentService.updateStudent(this.student).subscribe({next:()=>this.successMsg="C\u1EADp nh\u1EADt th\xE0nh c\xF4ng!",error:()=>this.errorMsg="C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i!"})}static{this.\u0275fac=function(r){return new(r||a)(p(Je),p(P))}}static{this.\u0275cmp=b({type:a,selectors:[["app-profile-edit"]],standalone:!0,features:[x],decls:42,vars:8,consts:[[1,"container","mt-5"],[1,"card","shadow"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["name","studentCode","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["name","name",1,"form-control",3,"ngModelChange","ngModel"],["name","gender",1,"form-select",3,"ngModelChange","ngModel"],["value","Nam"],["value","N\u1EEF"],["type","date","name","birthDate",1,"form-control",3,"ngModelChange","ngModel"],["name","class",1,"form-control",3,"ngModelChange","ngModel"],["name","course",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),n(4,"\u270F\uFE0F Ch\u1EC9nh s\u1EEDa th\xF4ng tin c\xE1 nh\xE2n"),e()(),i(5,"div",4)(6,"form",5),f("ngSubmit",function(){return o.onSubmit()}),i(7,"div",6)(8,"label",7),n(9,"M\xE3 sinh vi\xEAn"),e(),i(10,"input",8),q("ngModelChange",function(c){return W(o.student.studentCode,c)||(o.student.studentCode=c),c}),e()(),i(11,"div",6)(12,"label",7),n(13,"H\u1ECD t\xEAn"),e(),i(14,"input",9),q("ngModelChange",function(c){return W(o.student.name,c)||(o.student.name=c),c}),e()(),i(15,"div",6)(16,"label",7),n(17,"Gi\u1EDBi t\xEDnh"),e(),i(18,"select",10),q("ngModelChange",function(c){return W(o.student.gender,c)||(o.student.gender=c),c}),i(19,"option",11),n(20,"Nam"),e(),i(21,"option",12),n(22,"N\u1EEF"),e()()(),i(23,"div",6)(24,"label",7),n(25,"Ng\xE0y sinh"),e(),i(26,"input",13),q("ngModelChange",function(c){return W(o.student.birthDate,c)||(o.student.birthDate=c),c}),e()(),i(27,"div",6)(28,"label",7),n(29,"L\u1EDBp"),e(),i(30,"input",14),q("ngModelChange",function(c){return W(o.student.class,c)||(o.student.class=c),c}),e()(),i(31,"div",6)(32,"label",7),n(33,"Kho\xE1"),e(),i(34,"input",15),q("ngModelChange",function(c){return W(o.student.course,c)||(o.student.course=c),c}),e()(),i(35,"div",16)(36,"button",17),n(37,"\u{1F4BE} L\u01B0u"),e(),i(38,"button",18),f("click",function(){return o.goBack()}),n(39,"\u2B05 Quay l\u1EA1i"),e()()(),v(40,Si,2,1,"div",19)(41,vi,2,1,"div",20),e()()()),r&2&&(l(10),G("ngModel",o.student.studentCode),l(4),G("ngModel",o.student.name),l(4),G("ngModel",o.student.gender),l(8),G("ngModel",o.student.birthDate),l(4),G("ngModel",o.student.class),l(4),G("ngModel",o.student.course),l(6),d("ngIf",o.successMsg),l(),d("ngIf",o.errorMsg))},dependencies:[C,k,re,Q,he,ge,O,pe,R,z,ce,ze],encapsulation:2})}}return a})();function bi(a,m){a&1&&(i(0,"div"),n(1,"\u{1F389} B\u1EA1n \u0111\xE3 \u0111\u0103ng k\xFD h\u1EBFt t\u1EA5t c\u1EA3 m\xF4n h\u1ECDc!"),e())}function xi(a,m){if(a&1){let t=B();i(0,"li",10)(1,"div")(2,"strong"),n(3),e(),n(4),h(5,"br"),n(6," \u{1F5D3}\uFE0F Ng\xE0y b\u1EAFt \u0111\u1EA7u: "),i(7,"span"),n(8),A(9,"date"),e()(),i(10,"button",11),f("click",function(){let o=M(t).$implicit,s=g();return T(s.register(o.id))}),n(11,"\u0110\u0103ng k\xFD"),e()()}if(a&2){let t=m.$implicit;l(3),u(t.name),l(),E(" (",t.credit," TC)"),l(4),u(w(9,3,t.startDate,"dd/MM/yyyy"))}}function Ci(a,m){if(a&1&&(i(0,"li",10)(1,"div")(2,"strong"),n(3),e(),h(4,"br"),i(5,"small"),n(6),A(7,"date"),h(8,"br"),n(9),A(10,"date"),e()(),i(11,"span",12),n(12),e()()),a&2){let t=m.$implicit;l(3),u(t.name),l(3),E(" \u{1F4C5} B\u1EAFt \u0111\u1EA7u: ",w(7,4,t.startDate,"dd/MM/yyyy"),""),l(3),E(" \u{1F4DD} Thi: ",w(10,7,t.examDate,"dd/MM/yyyy")," "),l(3),E("",t.credit," t\xEDn ch\u1EC9")}}function Di(a,m){a&1&&(i(0,"div",13),n(1," \u26A0\uFE0F B\u1EA1n ch\u01B0a \u0111\u0103ng k\xFD m\xF4n h\u1ECDc n\xE0o. "),e())}var gt=(()=>{class a{constructor(t){this.http=t,this.allSubjects=[],this.registeredSubjects=[],this.availableSubjects=[],this.message=""}ngOnInit(){let t=localStorage.getItem("token");if(!t)return;let o=JSON.parse(atob(t.split(".")[1])).StudentId;this.http.get("https://localhost:7082/api/Subject").subscribe({next:s=>{this.allSubjects=s.data,this.http.get(`https://localhost:7082/api/Subject/schedule-and-score/${o}`).subscribe({next:c=>{this.registeredSubjects=c.data;let _=this.registeredSubjects.map(Z=>Z.subjectId);this.availableSubjects=this.allSubjects.filter(Z=>!_.includes(Z.id))},error:()=>{this.message="Kh\xF4ng th\u1EC3 t\u1EA3i danh s\xE1ch m\xF4n \u0111\xE3 \u0111\u0103ng k\xFD."}})},error:()=>{this.message="Kh\xF4ng th\u1EC3 t\u1EA3i danh s\xE1ch m\xF4n h\u1ECDc."}})}register(t){this.message="";let r=localStorage.getItem("token");if(!r)return;let c={studentId:JSON.parse(atob(r.split(".")[1])).StudentId,subjectId:t};this.http.post("https://localhost:7082/api/Subject/register",c).subscribe({next:()=>{this.message="\u2705 \u0110\u0103ng k\xFD th\xE0nh c\xF4ng!",this.ngOnInit()},error:_=>{_.status===400?this.message="\u26A0\uFE0F M\xF4n h\u1ECDc \u0111\xE3 \u0111\u01B0\u1EE3c \u0111\u0103ng k\xFD r\u1ED3i.":this.message="\u274C L\u1ED7i khi \u0111\u0103ng k\xFD m\xF4n h\u1ECDc."}})}unregister(t){this.message="\u274C H\u1EE7y \u0111\u0103ng k\xFD kh\xF4ng \u0111\u01B0\u1EE3c ph\xE9p (theo backend)."}static{this.\u0275fac=function(r){return new(r||a)(p(K))}}static{this.\u0275cmp=b({type:a,selectors:[["app-subject-register"]],standalone:!0,features:[x],decls:15,vars:4,consts:[[1,"container","mt-4"],[4,"ngIf"],[1,"list-group","mb-4"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"card","shadow"],[1,"card-header","bg-success","text-white"],[1,"mb-0"],[1,"card-body"],[1,"list-group"],["class","alert alert-warning mt-3",4,"ngIf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"badge","bg-primary","rounded-pill"],[1,"alert","alert-warning","mt-3"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"h3"),n(2,"\u{1F4DA} M\xF4n h\u1ECDc c\xF3 th\u1EC3 \u0111\u0103ng k\xFD"),e(),v(3,bi,2,0,"div",1),i(4,"ul",2),v(5,xi,12,6,"li",3),e(),i(6,"div",0)(7,"div",4)(8,"div",5)(9,"h5",6),n(10,"\u2705 M\xF4n h\u1ECDc \u0111\xE3 \u0111\u0103ng k\xFD"),e()(),i(11,"div",7)(12,"ul",8),v(13,Ci,13,10,"li",3),e(),v(14,Di,2,0,"div",9),e()()()()),r&2&&(l(3),d("ngIf",o.availableSubjects.length===0),l(2),d("ngForOf",o.availableSubjects),l(8),d("ngForOf",o.registeredSubjects),l(),d("ngIf",o.registeredSubjects.length===0))},dependencies:[C,V,k,H],encapsulation:2})}}return a})();var _i=()=>["/student"],Et=(a,m)=>({"badge bg-success":a,"badge bg-danger":m});function yi(a,m){if(a&1&&(i(0,"tr")(1,"td"),n(2),e(),i(3,"td")(4,"strong"),n(5),e()(),i(6,"td"),n(7),A(8,"date"),e(),i(9,"td"),n(10),e(),i(11,"td"),n(12),A(13,"date"),e(),i(14,"td"),n(15),e()()),a&2){let t=m.$implicit,r=m.index;l(2),u(r+1),l(3),u(t.subjectName),l(2),u(w(8,6,t.startDate,"dd/MM/yyyy")),l(3),u(t.studyTime),l(2),u(w(13,9,t.examDate,"dd/MM/yyyy")),l(3),u(t.examTime)}}function Fi(a,m){if(a&1&&(i(0,"tr")(1,"td"),n(2),e(),i(3,"td")(4,"strong"),n(5),e()(),i(6,"td"),n(7),e(),i(8,"td"),n(9),e(),i(10,"td"),n(11),e(),i(12,"td")(13,"span",22),n(14),e()()()),a&2){let t,r,o,s=m.$implicit,c=m.index;l(2),u(c+1),l(3),u(s.subjectName),l(2),u((t=s.processPoint)!==null&&t!==void 0?t:"-"),l(2),u((r=s.componentPoint)!==null&&r!==void 0?r:"-"),l(2),u((o=s.finalPoint)!==null&&o!==void 0?o:"-"),l(2),d("ngClass",le(7,Et,s.isPassed,s.isPassed===!1)),l(),E(" ",s.isPassed?"\u2714 \u0110\u1EA1t":"\u2718 R\u1EDBt"," ")}}function Ii(a,m){if(a&1&&(i(0,"div")(1,"h6",21),n(2,"\u2714 M\xF4n \u0111\xE3 ho\xE0n th\xE0nh"),e(),i(3,"table",12)(4,"thead",13)(5,"tr")(6,"th"),n(7,"#"),e(),i(8,"th"),n(9,"M\xF4n h\u1ECDc"),e(),i(10,"th"),n(11,"\u0110i\u1EC3m qu\xE1 tr\xECnh"),e(),i(12,"th"),n(13,"\u0110i\u1EC3m th\xE0nh ph\u1EA7n"),e(),i(14,"th"),n(15,"\u0110i\u1EC3m cu\u1ED1i k\u1EF3"),e(),i(16,"th"),n(17,"\u0110\u1EA1t"),e()()(),i(18,"tbody"),v(19,Fi,15,10,"tr",14),e()()()),a&2){let t=g();l(19),d("ngForOf",t.completedScores)}}function ji(a,m){if(a&1&&(i(0,"tr")(1,"td"),n(2),e(),i(3,"td")(4,"strong"),n(5),e()(),i(6,"td"),n(7),e(),i(8,"td"),n(9),e(),i(10,"td"),n(11),e(),i(12,"td")(13,"span",17),n(14,"-"),e()()()),a&2){let t,r,o,s=m.$implicit,c=m.index;l(2),u(c+1),l(3),u(s.subjectName),l(2),u((t=s.processPoint)!==null&&t!==void 0?t:"-"),l(2),u((r=s.componentPoint)!==null&&r!==void 0?r:"-"),l(2),u((o=s.finalPoint)!==null&&o!==void 0?o:"-")}}function ki(a,m){if(a&1&&(i(0,"div")(1,"h6",23),n(2,"\u23F3 M\xF4n ch\u01B0a ho\xE0n th\xE0nh"),e(),i(3,"table",12)(4,"thead",24)(5,"tr")(6,"th"),n(7,"#"),e(),i(8,"th"),n(9,"M\xF4n h\u1ECDc"),e(),i(10,"th"),n(11,"\u0110i\u1EC3m qu\xE1 tr\xECnh"),e(),i(12,"th"),n(13,"\u0110i\u1EC3m th\xE0nh ph\u1EA7n"),e(),i(14,"th"),n(15,"\u0110i\u1EC3m cu\u1ED1i k\u1EF3"),e(),i(16,"th"),n(17,"\u0110\u1EA1t"),e()()(),i(18,"tbody"),v(19,ji,15,5,"tr",14),e()()()),a&2){let t=g();l(19),d("ngForOf",t.incompletedScores)}}function Ai(a,m){if(a&1&&(i(0,"tr")(1,"td"),n(2),e(),i(3,"td")(4,"strong"),n(5),e()(),i(6,"td"),n(7),e(),i(8,"td"),n(9),e(),i(10,"td"),n(11),e(),i(12,"td")(13,"span",22),n(14),e()()()),a&2){let t,r,o,s=m.$implicit,c=m.index;l(2),u(c+1),l(3),u(s.subjectName),l(2),u((t=s.processPoint)!==null&&t!==void 0?t:"-"),l(2),u((r=s.componentPoint)!==null&&r!==void 0?r:"-"),l(2),u((o=s.finalPoint)!==null&&o!==void 0?o:"-"),l(2),d("ngClass",le(7,Et,s.isPassed,s.isPassed===!1)),l(),E(" ",s.isPassed?"\u2714 \u0110\u1EA1t":"\u2718 R\u1EDBt"," ")}}function wi(a,m){if(a&1&&(i(0,"tr")(1,"td"),n(2),e(),i(3,"td")(4,"strong"),n(5),e()(),i(6,"td"),n(7),e(),i(8,"td"),n(9),e(),i(10,"td"),n(11),e(),i(12,"td")(13,"span",17),n(14,"-"),e()()()),a&2){let t,r,o,s=m.$implicit,c=m.index;l(2),u(c+1),l(3),u(s.subjectName),l(2),u((t=s.processPoint)!==null&&t!==void 0?t:"-"),l(2),u((r=s.componentPoint)!==null&&r!==void 0?r:"-"),l(2),u((o=s.finalPoint)!==null&&o!==void 0?o:"-")}}function Mi(a,m){if(a&1&&(i(0,"div")(1,"h6",21),n(2,"\u2714 M\xF4n \u0111\xE3 ho\xE0n th\xE0nh"),e(),i(3,"table",12)(4,"thead",13)(5,"tr")(6,"th"),n(7,"#"),e(),i(8,"th"),n(9,"M\xF4n h\u1ECDc"),e(),i(10,"th"),n(11,"\u0110i\u1EC3m qu\xE1 tr\xECnh"),e(),i(12,"th"),n(13,"\u0110i\u1EC3m th\xE0nh ph\u1EA7n"),e(),i(14,"th"),n(15,"\u0110i\u1EC3m cu\u1ED1i k\u1EF3"),e(),i(16,"th"),n(17,"\u0110\u1EA1t"),e()()(),i(18,"tbody"),v(19,Ai,15,10,"tr",14),e()(),i(20,"h6",25),n(21,"\u23F3 M\xF4n ch\u01B0a ho\xE0n th\xE0nh"),e(),i(22,"table",12)(23,"thead",24)(24,"tr")(25,"th"),n(26,"#"),e(),i(27,"th"),n(28,"M\xF4n h\u1ECDc"),e(),i(29,"th"),n(30,"\u0110i\u1EC3m qu\xE1 tr\xECnh"),e(),i(31,"th"),n(32,"\u0110i\u1EC3m th\xE0nh ph\u1EA7n"),e(),i(33,"th"),n(34,"\u0110i\u1EC3m cu\u1ED1i k\u1EF3"),e(),i(35,"th"),n(36,"\u0110\u1EA1t"),e()()(),i(37,"tbody"),v(38,wi,15,5,"tr",14),e()()()),a&2){let t=g();l(19),d("ngForOf",t.completedScores),l(19),d("ngForOf",t.incompletedScores)}}var ft=(()=>{class a{constructor(t,r){this.http=t,this.route=r,this.schedule=[],this.scores=[],this.completedScores=[],this.incompletedScores=[],this.activeTab="schedule",this.filterMode="all",this.gpa=null}ngOnInit(){let t=localStorage.getItem("token");if(!t)return;let o=JSON.parse(atob(t.split(".")[1])).StudentId;this.http.get(`https://localhost:7082/api/Subject/schedule-and-score/${o}`).subscribe({next:s=>{let c=s.data;this.schedule=c.map(_=>({subjectName:_.name,startDate:_.startDate,studyTime:_.studyTime,examDate:_.examDate,examTime:_.examTime})),this.scores=c.map(_=>({subjectName:_.name,processPoint:_.processPoint,componentPoint:_.componentPoint,finalPoint:_.finalPoint,isPassed:_.isPassed})),this.completedScores=this.scores.filter(_=>_.finalPoint!==null),this.incompletedScores=this.scores.filter(_=>_.finalPoint===null),this.calculateGPA()},error:()=>{alert("\u274C Kh\xF4ng th\u1EC3 t\u1EA3i l\u1ECBch h\u1ECDc v\xE0 \u0111i\u1EC3m s\u1ED1.")}}),this.route.queryParams.subscribe(s=>{let c=s.tab;c==="completed"?(this.activeTab="scores",this.filterMode="completed"):c==="passed"||c==="incompleted"?(this.activeTab="scores",this.filterMode="incompleted"):(this.activeTab="schedule",this.filterMode="all"),setTimeout(()=>this.activateTab(),100)})}activateTab(){let t=document.querySelector(`button[data-bs-target="#${this.activeTab}"]`);t&&t.click()}convertToGPA4(t){return t>=8.5?4:t>=8?3.5:t>=7?3:t>=6.5?2.5:t>=5.5?2:t>=5?1.5:t>=4?1:0}calculateGPA(){let t=this.completedScores;if(t.length===0){this.gpa=null;return}let r=t.map(o=>this.convertToGPA4(o.finalPoint)).reduce((o,s)=>o+s,0);this.gpa=parseFloat((r/t.length).toFixed(2))}static{this.\u0275fac=function(r){return new(r||a)(p(K),p(L))}}static{this.\u0275cmp=b({type:a,selectors:[["app-schedule-score"]],standalone:!0,features:[x],decls:44,vars:7,consts:[[1,"container","mt-4"],[1,"card","shadow"],[1,"card-header","bg-primary","text-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn","btn-light","btn-sm",3,"routerLink"],[1,"card-body"],["role","tablist",1,"nav","nav-tabs","mb-3"],[1,"nav-item"],["data-bs-toggle","tab","data-bs-target","#schedule",1,"nav-link","active"],["data-bs-toggle","tab","data-bs-target","#scores",1,"nav-link"],[1,"tab-content"],["id","schedule",1,"tab-pane","fade","show","active"],[1,"table","table-bordered","table-hover","mt-2"],[1,"table-success"],[4,"ngFor","ngForOf"],["id","scores",1,"tab-pane","fade"],[1,"d-flex","justify-content-end","mb-2"],[1,"text-muted"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"text-success","mt-3"],[3,"ngClass"],[1,"text-warning","mt-3"],[1,"table-warning"],[1,"text-warning","mt-5"]],template:function(r,o){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),n(4,"\u{1F4DA} L\u1ECBch h\u1ECDc & \u0110i\u1EC3m s\u1ED1"),e(),i(5,"a",4),n(6,"\u2B05\uFE0F Quay l\u1EA1i"),e()(),i(7,"div",5)(8,"ul",6)(9,"li",7)(10,"button",8),n(11,"\u{1F5D3}\uFE0F L\u1ECBch h\u1ECDc"),e()(),i(12,"li",7)(13,"button",9),n(14,"\u{1F4CA} B\u1EA3ng \u0111i\u1EC3m"),e()()(),i(15,"div",10)(16,"div",11)(17,"table",12)(18,"thead",13)(19,"tr")(20,"th"),n(21,"#"),e(),i(22,"th"),n(23,"M\xF4n h\u1ECDc"),e(),i(24,"th"),n(25,"Ng\xE0y b\u1EAFt \u0111\u1EA7u"),e(),i(26,"th"),n(27,"Th\u1EDDi gian h\u1ECDc"),e(),i(28,"th"),n(29,"Ng\xE0y thi"),e(),i(30,"th"),n(31,"Th\u1EDDi gian thi"),e()()(),i(32,"tbody"),v(33,yi,16,12,"tr",14),e()()(),i(34,"div",15)(35,"div",16)(36,"span",17)(37,"strong"),n(38,"\u{1F393} GPA:"),e(),n(39),e()(),se(40,18),v(41,Ii,20,1,"div",19)(42,ki,20,1,"div",19)(43,Mi,39,2,"div",20),ue(),e()()()()()),r&2){let s;l(5),d("routerLink",y(6,_i)),l(28),d("ngForOf",o.schedule),l(6),E(" ",(s=o.gpa)!==null&&s!==void 0?s:"-","/4.00"),l(),d("ngSwitch",o.filterMode),l(),d("ngSwitchCase","completed"),l(),d("ngSwitchCase","incompleted")}},dependencies:[C,de,V,Be,Ve,Oe,H,D,I],encapsulation:2})}}return a})();var St=[{path:"login",component:et},{path:"admin",component:nt,canActivate:[je,tt],children:[{path:"",component:ot},{path:"students",component:at},{path:"students/add",component:Ae},{path:"students/edit/:id",component:Ae},{path:"students/detail/:id",component:lt},{path:"subjects",component:st,runGuardsAndResolvers:"always"},{path:"subjects/add",component:we},{path:"subjects/edit/:id",component:we},{path:"subjects/detail/:id",component:ut},{path:"subjects/:id/students",component:dt},{path:"subjects/:id/register-student",loadComponent:()=>import("./chunk-CGWEDDHY.mjs").then(a=>a.SubjectRegisterStudentComponent)},{path:"subjects/search",loadComponent:()=>import("./chunk-KVYO5UUS.mjs").then(a=>a.SubjectSearchComponent)},{path:"scores",component:mt},{path:"scores/input",component:ct}]},{path:"student",component:rt,canActivate:[je,it],children:[{path:"",component:pt},{path:"profile",component:ht},{path:"register-subjects",component:gt},{path:"schedule-score",component:ft},{path:"user-info",loadComponent:()=>import("./chunk-XDNLKYCA.mjs").then(a=>a.UserInfoComponent)},{path:"progress",loadComponent:()=>import("./chunk-QAFYDA4K.mjs").then(a=>a.StudentProgressComponent)}]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login"}];var vt=(()=>{class a{intercept(t,r){let o=localStorage.getItem("token");if(o){let s=t.clone({setHeaders:{Authorization:`Bearer ${o}`}});return r.handle(s)}return r.handle(t)}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275prov=te({token:a,factory:a.\u0275fac})}}return a})();var bt={providers:[Ue(St),Ge(We(),qe()),Te(re,$),{provide:Re,useClass:vt,multi:!0}]};var Ti={providers:[$e()]},xt=Le(bt,Ti);var Pi=()=>Ke(Ye,xt),Pr=Pi;export{Pr as a};
