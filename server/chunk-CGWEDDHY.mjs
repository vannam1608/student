import './polyfills.server.mjs';
import{b as D,c as x,d as y,g as R,i as k,j as N,k as A,l as M,m as O,p as T,r as V}from"./chunk-RPZVJSOK.mjs";import{f as E,i as F,m as j}from"./chunk-Z3XXXIBN.mjs";import{$a as v,Ja as m,La as d,Na as s,Oa as o,Qb as S,Rb as C,Ta as p,Ua as f,V as g,Xb as I,Ya as r,Za as h,cc as _,eb as b,va as a,wa as l}from"./chunk-DRMBBSAZ.mjs";import"./chunk-VVCT4QZE.mjs";function B(e,c){if(e&1&&(s(0,"div",15),r(1),o()),e&2){let i=f();a(),h(i.message)}}function G(e,c){if(e&1&&(s(0,"option",16),r(1),o()),e&2){let i=c.$implicit;d("value",i.id),a(),v(" ",i.name," (",i.studentCode,") ")}}function w(e,c){e&1&&(s(0,"div",17),r(1," \u26A0\uFE0F Vui l\xF2ng ch\u1ECDn sinh vi\xEAn "),o())}var P=(()=>{class e{constructor(i,u,t,n){this.route=i,this.fb=u,this.http=t,this.router=n,this.message="",this.students=[]}ngOnInit(){this.subjectId=+this.route.snapshot.paramMap.get("id"),this.loadStudents(),this.form=this.fb.group({studentId:["",D.required]})}loadStudents(){this.http.get("https://localhost:7082/api/Student").subscribe({next:i=>this.students=i.data,error:()=>this.message="Kh\xF4ng t\u1EA3i \u0111\u01B0\u1EE3c danh s\xE1ch sinh vi\xEAn."})}onSubmit(){if(this.form.invalid)return;let u={studentId:this.form.value.studentId,subjectId:this.subjectId};this.http.post("https://localhost:7082/api/Subject/register",u).subscribe({next:t=>{t?.success?(this.message="\u2705 \u0110\u0103ng k\xFD th\xE0nh c\xF4ng"+t.message,this.form.reset()):this.message="\u274C "+(t.message||"\u0110\u0103ng k\xFD th\u1EA5t b\u1EA1i.")},error:t=>{let n=t.error;n?.message?this.message="\u274C "+n.message:this.message="\u274C L\u1ED7i kh\xF4ng x\xE1c \u0111\u1ECBnh."}})}goBack(){this.router.navigate(["/admin/subjects"])}static{this.\u0275fac=function(u){return new(u||e)(l(E),l(T),l(_),l(F))}}static{this.\u0275cmp=g({type:e,selectors:[["app-subject-register-student"]],standalone:!0,features:[b],decls:20,vars:5,consts:[[1,"container","mt-5"],[1,"card","shadow"],[1,"card-body"],[1,"card-title","mb-4"],["class","alert alert-info",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","studentId",1,"form-label"],["formControlName","studentId","id","studentId",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger mt-1",4,"ngIf"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"alert","alert-info"],[3,"value"],[1,"text-danger","mt-1"]],template:function(u,t){if(u&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),r(4,"\u{1F4DA} \u0110\u0103ng k\xFD m\xF4n h\u1ECDc cho sinh vi\xEAn"),o(),m(5,B,2,1,"div",4),s(6,"form",5),p("ngSubmit",function(){return t.onSubmit()}),s(7,"div",6)(8,"label",7),r(9,"\u{1F464} Ch\u1ECDn sinh vi\xEAn"),o(),s(10,"select",8)(11,"option",9),r(12,"-- Vui l\xF2ng ch\u1ECDn sinh vi\xEAn --"),o(),m(13,G,2,3,"option",10),o(),m(14,w,2,0,"div",11),o(),s(15,"div",12)(16,"button",13),r(17," \u2795 \u0110\u0103ng k\xFD "),o(),s(18,"button",14),p("click",function(){return t.goBack()}),r(19," \u2B05\uFE0F Quay l\u1EA1i "),o()()()()()()),u&2){let n;a(5),d("ngIf",t.message),a(),d("formGroup",t.form),a(7),d("ngForOf",t.students),a(),d("ngIf",((n=t.form.get("studentId"))==null?null:n.invalid)&&((n=t.form.get("studentId"))==null?null:n.touched)),a(2),d("disabled",t.form.invalid)}},dependencies:[I,S,C,j,V,R,M,O,A,x,y,k,N],encapsulation:2})}}return e})();export{P as SubjectRegisterStudentComponent};
